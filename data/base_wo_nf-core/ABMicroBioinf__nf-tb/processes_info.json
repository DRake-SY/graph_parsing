{
    "get_mtbc_reads": {
        "name_process": "get_mtbc_reads",
        "string_process": "\nprocess get_mtbc_reads {\n  \n  publishDir \"${params.outdir}/mtbc\", mode: \"copy\" \n\n  input:\n  set val(name), file(reads) from reads_ch\n  path dir from params.input_kraken2_dir \n  \n  output:\n  set val(name), file(\"*.mtbc.fastq\") into mtbc_reads_ch\n\n  script:\n  \n   if (params.type == 'single-end') {\n\n    \"\"\"\n    taxonFilter.pl ${dir}/${name}.kraken2.output.txt  > ${dir}/${name}_mtbc_accession.txt\n    seqtk subseq ${reads} ${name}_mtbc_accession.txt > ${name}.mtbc.fastq\n    \"\"\"\n  }\n  else{\n    \"\"\"\n    taxonFilter.pl  ${dir}/${name}.kraken2.output.txt  >  ${name}_mtbc_accession.txt\n    seqtk subseq ${reads[0]} ${name}_mtbc_accession.txt > ${name}_R1.mtbc.fastq\n    seqtk subseq ${reads[1]} ${name}_mtbc_accession.txt > ${name}_R2.mtbc.fastq\n    \"\"\"\n\n  }\n}",
        "nb_lignes_process": 28,
        "string_script": "   if (params.type == 'single-end') {\n\n    \"\"\"\n    taxonFilter.pl ${dir}/${name}.kraken2.output.txt  > ${dir}/${name}_mtbc_accession.txt\n    seqtk subseq ${reads} ${name}_mtbc_accession.txt > ${name}.mtbc.fastq\n    \"\"\"\n  }\n  else{\n    \"\"\"\n    taxonFilter.pl  ${dir}/${name}.kraken2.output.txt  >  ${name}_mtbc_accession.txt\n    seqtk subseq ${reads[0]} ${name}_mtbc_accession.txt > ${name}_R1.mtbc.fastq\n    seqtk subseq ${reads[1]} ${name}_mtbc_accession.txt > ${name}_R2.mtbc.fastq\n    \"\"\"\n\n  }",
        "nb_lignes_script": 14,
        "language_script": "bash",
        "tools": [
            "seqtk"
        ],
        "tools_url": [
            "https://bio.tools/seqtk"
        ],
        "tools_dico": [
            {
                "name": "seqtk",
                "uri": "https://bio.tools/seqtk",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Biological databases"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Data management"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Information systems"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Databases and information systems"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Data handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2121",
                                    "term": "Sequence file editing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Utility operation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File processing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Report handling"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "A tool for processing sequences in the FASTA or FASTQ format. It parses both FASTA and FASTQ files which can also be optionally compressed by gzip.",
                "homepage": "https://github.com/lh3/seqtk"
            }
        ],
        "inputs": [
            "reads_ch",
            "params"
        ],
        "nb_inputs": 2,
        "outputs": [
            "mtbc_reads_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [
            "publishDir \"${params.outdir}/mtbc\", mode: \"copy\""
        ],
        "when": "",
        "stub": ""
    },
    "indexRefGenome": {
        "name_process": "indexRefGenome",
        "string_process": "\nprocess indexRefGenome {\n                                                           \n    input:\n      path genome from params.ref_genome\n    output:\n      file '*' into bwa_index\n\n    script:\n    \"\"\"\n    bwa index ${genome}\n    \"\"\"\n}",
        "nb_lignes_process": 11,
        "string_script": "    \"\"\"\n    bwa index ${genome}\n    \"\"\"",
        "nb_lignes_script": 2,
        "language_script": "bash",
        "tools": [
            "BWA"
        ],
        "tools_url": [
            "https://bio.tools/bwa"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            }
        ],
        "inputs": [
            "params"
        ],
        "nb_inputs": 1,
        "outputs": [
            "bwa_index"
        ],
        "nb_outputs": 1,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [],
        "when": "",
        "stub": ""
    },
    "mapping_mtbc_and_filter": {
        "name_process": "mapping_mtbc_and_filter",
        "string_process": "\nprocess mapping_mtbc_and_filter {\n\n  label \"small_mem\"\n\n  publishDir \"${params.outdir}/bam\", mode: \"copy\" \n\n  input:\n  set val(name), file(reads) from mtbc_reads_ch\n  path index from bwa_index\n  path genome from params.ref_genome\n  \n  output:\n  set val(name), file(\"*.sort.bam\") into bam_to_tbprofiling\n  set val(name), file(\"*.sort.bam\") into bam_to_snippy\n  file \"*\" into mapped_ch\n \n  script:\n\n   if (params.type == 'single-end') {\n    \"\"\"\n     bwa mem -t ${task.cpus} \\\n     -c 100 -R '@RG\\\\tID:${name}\\\\tSM:${name}\\\\tPL:illumina' -M -T 50 \\\n     ${genome} ${reads} \\\n     | samtools view -@ ${task.cpus} -Sb1 -q ${params.mq} - \\\n     | samtools sort -@ ${task.cpus} -o ${name}.sort.bam -\n\n     samtools index -@ ${task.cpus} ${name}.sort.bam\n    \"\"\"\n  }\n\n   else {\n    \"\"\"\n     bwa mem -t ${task.cpus} \\\n     -c 100 -R '@RG\\\\tID:${name}\\\\tSM:${name}\\\\tPL:illumina' -M -T 50 \\\n     ${genome} ${reads[0]} ${reads[1]} \\\n     | samtools view -@ ${task.cpus} -Sb1 -q ${params.mq} - \\\n     | samtools sort -@ ${task.cpus} -o ${name}.sort.bam -\n\n     samtools index -@ ${task.cpus} ${name}.sort.bam\n    \"\"\"\n  }\n}",
        "nb_lignes_process": 41,
        "string_script": "   if (params.type == 'single-end') {\n    \"\"\"\n     bwa mem -t ${task.cpus} \\\n     -c 100 -R '@RG\\\\tID:${name}\\\\tSM:${name}\\\\tPL:illumina' -M -T 50 \\\n     ${genome} ${reads} \\\n     | samtools view -@ ${task.cpus} -Sb1 -q ${params.mq} - \\\n     | samtools sort -@ ${task.cpus} -o ${name}.sort.bam -\n\n     samtools index -@ ${task.cpus} ${name}.sort.bam\n    \"\"\"\n  }\n\n   else {\n    \"\"\"\n     bwa mem -t ${task.cpus} \\\n     -c 100 -R '@RG\\\\tID:${name}\\\\tSM:${name}\\\\tPL:illumina' -M -T 50 \\\n     ${genome} ${reads[0]} ${reads[1]} \\\n     | samtools view -@ ${task.cpus} -Sb1 -q ${params.mq} - \\\n     | samtools sort -@ ${task.cpus} -o ${name}.sort.bam -\n\n     samtools index -@ ${task.cpus} ${name}.sort.bam\n    \"\"\"\n  }",
        "nb_lignes_script": 22,
        "language_script": "bash",
        "tools": [
            "BWA",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/bwa",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "mtbc_reads_ch",
            "bwa_index",
            "params"
        ],
        "nb_inputs": 3,
        "outputs": [
            "bam_to_tbprofiling",
            "bam_to_snippy",
            "mapped_ch"
        ],
        "nb_outputs": 3,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [
            "label \"small_mem\"",
            "publishDir \"${params.outdir}/bam\", mode: \"copy\""
        ],
        "when": "",
        "stub": ""
    },
    "run_snippy_and_variant_filter": {
        "name_process": "run_snippy_and_variant_filter",
        "string_process": "\nprocess run_snippy_and_variant_filter {\n  \n  label \"small_mem\"\n  publishDir \"${params.outdir}/snippy\", mode: 'copy'\n  \n  input:\n  set val(name), file(bam) from bam_to_snippy\n  path genome from params.ref_genome\n\n  output:\n  file \"*.whole.filter.vcf.gz\" into build_tree_ch\n  file \"*.whole.filter.vcf.gz.csi\" into csi_ch \n\n  script:\n  \n    \"\"\"\n    echo ${bam}\n    snippy --outdir ./ --prefix ${name}.whole --ref ${genome} --bam ${bam} --rgid ${name} --minfrac 0.1 --cpus ${task.cpus} --force\n    tb_variant_filter  -I  --indel_window_size 5 --region_filter pe_ppe,uvp  -P --min_percentage_alt 90  -D --min_depth 30 ${name}.whole.vcf ${name}.whole.filter.vcf\n    bgzip -c ${name}.whole.filter.vcf > ${name}.whole.filter.vcf.gz\n    bcftools index ${name}.whole.filter.vcf.gz\n    \"\"\"\n\n}",
        "nb_lignes_process": 23,
        "string_script": "    \"\"\"\n    echo ${bam}\n    snippy --outdir ./ --prefix ${name}.whole --ref ${genome} --bam ${bam} --rgid ${name} --minfrac 0.1 --cpus ${task.cpus} --force\n    tb_variant_filter  -I  --indel_window_size 5 --region_filter pe_ppe,uvp  -P --min_percentage_alt 90  -D --min_depth 30 ${name}.whole.vcf ${name}.whole.filter.vcf\n    bgzip -c ${name}.whole.filter.vcf > ${name}.whole.filter.vcf.gz\n    bcftools index ${name}.whole.filter.vcf.gz\n    \"\"\"",
        "nb_lignes_script": 6,
        "language_script": "bash",
        "tools": [
            "snippy",
            "BCFtools"
        ],
        "tools_url": [
            "https://bio.tools/snippy",
            "https://bio.tools/bcftools"
        ],
        "tools_dico": [
            {
                "name": "snippy",
                "uri": "https://bio.tools/snippy",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2885",
                            "term": "DNA polymorphism"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0621",
                            "term": "Model organisms"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3293",
                            "term": "Phylogenetics"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0621",
                            "term": "Organisms"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0567",
                                    "term": "Phylogenetic tree visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0323",
                                    "term": "Phylogenetic inference"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant calling"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0567",
                                    "term": "Phylogenetic tree rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0323",
                                    "term": "Phlyogenetic tree construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0323",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0323",
                                    "term": "Phylogenetic tree generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant mapping"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Rapid haploid variant calling and core SNP phylogeny generation.",
                "homepage": "https://github.com/tseemann/snippy"
            },
            {
                "name": "BCFtools",
                "uri": "https://bio.tools/bcftools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3516",
                            "term": "Genotyping experiment"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0199",
                            "term": "Genetic variation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS study"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2885",
                            "term": "DNA polymorphism"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0199",
                            "term": "DNA variation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "Genome-wide association study"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Data handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant calling"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Utility operation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File processing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Report handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant mapping"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_3498",
                                "term": "Sequence variations"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_3498",
                                "term": "Sequence variations"
                            }
                        ]
                    }
                ],
                "description": "Set of utilities that manipulate variant calls in the Variant Call Format (VCF) and its binary counterpart BCF. All commands work transparently with both VCFs and BCFs, both uncompressed and BGZF-compressed.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "bam_to_snippy",
            "params"
        ],
        "nb_inputs": 2,
        "outputs": [
            "build_tree_ch",
            "csi_ch"
        ],
        "nb_outputs": 2,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [
            "label \"small_mem\"",
            "publishDir \"${params.outdir}/snippy\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "run_tbprofiling": {
        "name_process": "run_tbprofiling",
        "string_process": "\nprocess run_tbprofiling {\n  \n  label \"small_mem\"\n  publishDir \"${params.outdir}/tbprofiler\", mode: 'copy'\n  \n  input:\n  set val(name), file(bam) from bam_to_tbprofiling\n  \n  output:\n  file \"vcf/*\" into vcf_ch\n  file \"results/*\" into results_ch\n\n  script:\n  \n    \"\"\"\n    echo ${bam}\n\n    tb-profiler profile --threads ${task.cpus} --bam ${bam} \\\n      --prefix ${name} --csv --txt --verbose 2 \n    \n    \"\"\"\n\n}",
        "nb_lignes_process": 22,
        "string_script": "    \"\"\"\n    echo ${bam}\n\n    tb-profiler profile --threads ${task.cpus} --bam ${bam} \\\n      --prefix ${name} --csv --txt --verbose 2 \n    \n    \"\"\"",
        "nb_lignes_script": 6,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "bam_to_tbprofiling"
        ],
        "nb_inputs": 1,
        "outputs": [
            "vcf_ch",
            "results_ch"
        ],
        "nb_outputs": 2,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [
            "label \"small_mem\"",
            "publishDir \"${params.outdir}/tbprofiler\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "run_tbprofiler_collate": {
        "name_process": "run_tbprofiler_collate",
        "string_process": "\nprocess run_tbprofiler_collate {\n  label \"small_mem\"\n\n  publishDir \"${params.outdir}/tbprofiler/collate\", mode: \"copy\" \n\n  input:\n  file dir from results_dir_ch\n  path result_file from results_ch.collect()\n  \n  output:\n  file \"tbprofiler_collate*\" into collate_results\n\n\n  script:\n  \"\"\"\n  \n  echo $dir\n  tb-profiler collate -d $dir -p tbprofiler_collate \n  \"\"\"\n \n}",
        "nb_lignes_process": 20,
        "string_script": "  \"\"\"\n  \n  echo $dir\n  tb-profiler collate -d $dir -p tbprofiler_collate \n  \"\"\"",
        "nb_lignes_script": 4,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "results_dir_ch",
            "results_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            "collate_results"
        ],
        "nb_outputs": 1,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [
            "label \"small_mem\"",
            "publishDir \"${params.outdir}/tbprofiler/collate\", mode: \"copy\""
        ],
        "when": "",
        "stub": ""
    },
    "build_genome_tree": {
        "name_process": "build_genome_tree",
        "string_process": "\nprocess build_genome_tree {\n  label \"small_mem\"\n\n  publishDir \"${params.outdir}/tree\", mode: \"copy\" \n\n  input:\n                                              \n  file  vcf_whole from build_tree_ch.collect()\n  file csi from  csi_ch.collect()\n  output:\n  file(\"RAxML_bipartitions*\") into tree_out_ch\n\n  script:\n  \"\"\"\n  echo ${vcf_whole}\n  bcftools merge -Oz --threads ${task.cpus} -o merged.whole.vcf *.vcf.gz\n  vcf2phylip.py -i merged.whole.vcf -m ${params.min_samples_locus}\n  raxmlHPC-PTHREADS -m GTRGAMMA -p 12345 -s merged.whole.min${params.min_samples_locus}.phy -n whole_tree_1 -T ${task.cpus} -# 100\n  raxmlHPC-PTHREADS -m GTRGAMMA -p 12345 -b 12345 -s merged.whole.min${params.min_samples_locus}.phy -n whole_tree_2 -T ${task.cpus} -# 100\n  raxmlHPC-PTHREADS -m GTRGAMMA -p 12345 -f b -t RAxML_bestTree.whole_tree_1 -z RAxML_bootstrap.whole_tree_2  -n whole_tree -T ${task.cpus}\n  \"\"\"\n}",
        "nb_lignes_process": 21,
        "string_script": "  \"\"\"\n  echo ${vcf_whole}\n  bcftools merge -Oz --threads ${task.cpus} -o merged.whole.vcf *.vcf.gz\n  vcf2phylip.py -i merged.whole.vcf -m ${params.min_samples_locus}\n  raxmlHPC-PTHREADS -m GTRGAMMA -p 12345 -s merged.whole.min${params.min_samples_locus}.phy -n whole_tree_1 -T ${task.cpus} -# 100\n  raxmlHPC-PTHREADS -m GTRGAMMA -p 12345 -b 12345 -s merged.whole.min${params.min_samples_locus}.phy -n whole_tree_2 -T ${task.cpus} -# 100\n  raxmlHPC-PTHREADS -m GTRGAMMA -p 12345 -f b -t RAxML_bestTree.whole_tree_1 -z RAxML_bootstrap.whole_tree_2  -n whole_tree -T ${task.cpus}\n  \"\"\"",
        "nb_lignes_script": 7,
        "language_script": "bash",
        "tools": [
            "BCFtools"
        ],
        "tools_url": [
            "https://bio.tools/bcftools"
        ],
        "tools_dico": [
            {
                "name": "BCFtools",
                "uri": "https://bio.tools/bcftools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3516",
                            "term": "Genotyping experiment"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0199",
                            "term": "Genetic variation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS study"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2885",
                            "term": "DNA polymorphism"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0199",
                            "term": "DNA variation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "Genome-wide association study"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Data handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant calling"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Utility operation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File processing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Report handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant mapping"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_3498",
                                "term": "Sequence variations"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_3498",
                                "term": "Sequence variations"
                            }
                        ]
                    }
                ],
                "description": "Set of utilities that manipulate variant calls in the Variant Call Format (VCF) and its binary counterpart BCF. All commands work transparently with both VCFs and BCFs, both uncompressed and BGZF-compressed.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "build_tree_ch",
            "csi_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            "tree_out_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "ABMicroBioinf__nf-tb",
        "directive": [
            "label \"small_mem\"",
            "publishDir \"${params.outdir}/tree\", mode: \"copy\""
        ],
        "when": "",
        "stub": ""
    }
}