{
    "fastqc": {
        "name_process": "fastqc",
        "string_process": " process fastqc {\n     queue 'smallq'\n     memory '5 GB'\n     cpus  4\n     executor 'pbspro'\n\n        conda 'bioconda::fastqc'\n        tag \"$sampleId\"\n        publishDir \"${params.outdir}/\", mode: 'copy',\n            saveAs: {filename -> filename.indexOf(\".zip\") == -1 ? \"fastqc/$filename\" : null}\n\n        input:\n          set sampleId, path(read1), path(read2) from samples_ch\n\n        output:\n          file '*_fastqc.{zip,html}' into fastqc_results\n\n        script:\n          \"\"\"\n          fastqc -q $read1\n          fastqc -q $read2\n          \"\"\"\n    }",
        "nb_lignes_process": 21,
        "string_script": "          \"\"\"\n          fastqc -q $read1\n          fastqc -q $read2\n          \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [
            "FastQC"
        ],
        "tools_url": [
            "https://bio.tools/fastqc"
        ],
        "tools_dico": [
            {
                "name": "FastQC",
                "uri": "https://bio.tools/fastqc",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3572",
                            "term": "Data quality management"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3218",
                                    "term": "Sequencing quality control"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0236",
                                    "term": "Sequence composition calculation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Significance testing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical testing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical test"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical analysis"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3218",
                                    "term": "Sequencing QC"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3218",
                                    "term": "Sequencing quality assessment"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0848",
                                "term": "Raw sequence"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_2955",
                                "term": "Sequence report"
                            }
                        ]
                    }
                ],
                "description": "This tool aims to provide a QC report which can spot problems or biases which originate either in the sequencer or in the starting library material. It can be run in one of two modes. It can either run as a stand alone interactive application for the immediate analysis of small numbers of FastQ files, or it can be run in a non-interactive mode where it would be suitable for integrating into a larger analysis pipeline for the systematic processing of large numbers of files.",
                "homepage": "http://www.bioinformatics.babraham.ac.uk/projects/fastqc/"
            }
        ],
        "inputs": [
            "samples_ch"
        ],
        "nb_inputs": 1,
        "outputs": [
            "fastqc_results"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "queue 'smallq'",
            "memory '5 GB'",
            "cpus 4",
            "executor 'pbspro'",
            "conda 'bioconda::fastqc'",
            "tag \"$sampleId\"",
            "publishDir \"${params.outdir}/\", mode: 'copy' , saveAs: {filename -> filename.indexOf(\".zip\") == -1 ? \"fastqc/$filename\" : null}"
        ],
        "when": "",
        "stub": ""
    },
    "fastp": {
        "name_process": "fastp",
        "string_process": "\nprocess fastp {\n  tag \"$sampleId\"\n  publishDir \"${params.outdir}/trimmed\", mode: 'copy'\n\n  input:\n    set sampleId, path(read1), path(read2) from trim_ch\n    val qual from params.mean_quality\n    val trim_qual from params.trimming_quality\n\n  output:\n    set val(sampleId), path(\"trimmed_${sampleId}_R1.fastq.gz\"), path(\"trimmed_${sampleId}_R2.fastq.gz\") into trimmed_reads\n    file(\"fastp.*\")\n\n  script:\n    \"\"\"\n    fastp -i \"${read1}\" -I \"${read2}\"\\\n      -o \"trimmed_${sampleId}_R1.fastq.gz\"\\\n      -O \"trimmed_${sampleId}_R2.fastq.gz\"\n    \"\"\"\n}",
        "nb_lignes_process": 19,
        "string_script": "    \"\"\"\n    fastp -i \"${read1}\" -I \"${read2}\"\\\n      -o \"trimmed_${sampleId}_R1.fastq.gz\"\\\n      -O \"trimmed_${sampleId}_R2.fastq.gz\"\n    \"\"\"",
        "nb_lignes_script": 4,
        "language_script": "bash",
        "tools": [
            "fastPHASE"
        ],
        "tools_url": [
            "https://bio.tools/fastphase"
        ],
        "tools_dico": [
            {
                "name": "fastPHASE",
                "uri": "https://bio.tools/fastphase",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3056",
                            "term": "Population genetics"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3454",
                                    "term": "Phasing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "fastPHASE is a program to estimate missing genotypes and unobserved haplotypes. It is an implementation of the model described in Scheet & Stephens (2006). This is a cluster-based model for haplotype variation, and gains its utility from implicitly modeling the genealogy of chromosomes in a random sample from a population as a tree but summarizing all haplotype variation in the \"tips\" of the trees.",
                "homepage": "http://scheet.org/software.html"
            }
        ],
        "inputs": [
            "trim_ch",
            "params",
            "params"
        ],
        "nb_inputs": 3,
        "outputs": [
            "trimmed_reads"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$sampleId\"",
            "publishDir \"${params.outdir}/trimmed\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "megahit_assembly": {
        "name_process": "megahit_assembly",
        "string_process": "\nprocess megahit_assembly{\n  queue 'workq'\n  memory '200 GB'\n  cpus  24\n  executor 'pbspro'\n\n        tag \"$sampleId\"\n        conda 'bioconda::megahit'\n        publishDir \"${params.outdir}/assembly\", mode: 'copy'\n\n    input:\n                                                                                               \n        set path(read1) from trimmed_read1.collect()\n        set path(read2) from trimmed_read2.collect()\n\n    output:\n        set file (\"megahit_out/*.contigs.fa\") into contigs_mapping\n\n    script:\n                                                      \n        \"\"\"\n        megahit -t 24 -1 $read1 -2 $read2 -o megahit_out\n        \"\"\"\n\n                                           \n        \"\"\"\n        megahit -t 24 -r $merged --out-prefix $sampleId\n        \"\" \n  \n}",
        "nb_lignes_process": 29,
        "string_script": "        \"\"\"\n        megahit -t 24 -1 $read1 -2 $read2 -o megahit_out\n        \"\"\"\n\n                                           \n        \"\"\"\n        megahit -t 24 -r $merged --out-prefix $sampleId\n        \"\"",
        "nb_lignes_script": 7,
        "language_script": "bash",
        "tools": [
            "MEGAHIT"
        ],
        "tools_url": [
            "https://bio.tools/megahit"
        ],
        "tools_dico": [
            {
                "name": "MEGAHIT",
                "uri": "https://bio.tools/megahit",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0610",
                            "term": "Ecology"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0196",
                            "term": "Sequence assembly"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Genome assembly"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Sequence assembly (genome assembly)"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Genomic assembly"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Single node assembler for large and complex metagenomics NGS reads, such as soil. It makes use of succinct de Bruijn graph to achieve low memory usage, whereas its goal is not to make memory usage as low as possible.",
                "homepage": "https://github.com/voutcn/megahit"
            }
        ],
        "inputs": [
            "trimmed_read1",
            "trimmed_read2"
        ],
        "nb_inputs": 2,
        "outputs": [
            "contigs_mapping"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "queue 'workq'",
            "memory '200 GB'",
            "cpus 24",
            "executor 'pbspro'",
            "tag \"$sampleId\"",
            "conda 'bioconda::megahit'",
            "publishDir \"${params.outdir}/assembly\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "mapping": {
        "name_process": "mapping",
        "string_process": "\nprocess mapping {\n  tag \"$sampleId\"\n  publishDir \"${params.out}/bam_files\", mode: 'copy'\n\n  input:\n    tuple val(sampleId), file(tread1) from tr1_ch\n    tuple val(sampleId), file(tread2) from tr2_ch\n\n  output:\n    file(\"*map2${params.contigname}.bam\")\n    file(\"*.sorted.bam\")  into (sortedbam, bam4vcf)\n\n  script:\n  \"\"\"\n    bwa mem -t 16 $contigs $tread1 $tread2 | \\\n    samtools view -bS - > ${sampleId}_map2${params.contigname}.bam\n    samtools sort -@ 16 -o ${sampleId}_map2${params.contigname}.sorted.bam ${sampleId}_map2${params.contigname}.bam\n    samtools index ${sampleId}_map2${params.contigname}.sorted.bam\n  \"\"\"\n}",
        "nb_lignes_process": 19,
        "string_script": "  \"\"\"\n    bwa mem -t 16 $contigs $tread1 $tread2 | \\\n    samtools view -bS - > ${sampleId}_map2${params.contigname}.bam\n    samtools sort -@ 16 -o ${sampleId}_map2${params.contigname}.sorted.bam ${sampleId}_map2${params.contigname}.bam\n    samtools index ${sampleId}_map2${params.contigname}.sorted.bam\n  \"\"\"",
        "nb_lignes_script": 5,
        "language_script": "bash",
        "tools": [
            "BWA",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/bwa",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "tr1_ch",
            "tr2_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            ""
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$sampleId\"",
            "publishDir \"${params.out}/bam_files\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "get_fasta": {
        "name_process": "get_fasta",
        "string_process": "\nprocess get_fasta {\n    tag \"$chr_id\"\n    publishDir \"genome_fasta\", mode: 'copy'\n    conda 'bioconda::entrez-direct'\n\n    input:\n        val(chr_id) from chr_ch\n    \n    output:\n        file(\"${chr_id}.fa\") into genomes_ch\n        file(\"log.txt\") into done_ch\n    \n    script:\n    \"\"\"\n    efetch -db sequences -format fasta -id $chr_id > ${chr_id}.fa\n    echo \"download completed\" > log.txt\n    \"\"\"\n}",
        "nb_lignes_process": 17,
        "string_script": "    \"\"\"\n    efetch -db sequences -format fasta -id $chr_id > ${chr_id}.fa\n    echo \"download completed\" > log.txt\n    \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [
            "eFetch Snp"
        ],
        "tools_url": [
            "https://bio.tools/efetch_snp"
        ],
        "tools_dico": [
            {
                "name": "eFetch Snp",
                "uri": "https://bio.tools/efetch_snp",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Biological databases"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Data management"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Information systems"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3071",
                            "term": "Databases and information systems"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2422",
                                    "term": "Data retrieval"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2422",
                                    "term": "Data extraction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2422",
                                    "term": "Retrieval"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Get SNPs information given SNP ID list.",
                "homepage": "http://www.ncbi.nlm.nih.gov/corehtml/query/static/efetchseq_help.html"
            }
        ],
        "inputs": [
            "chr_ch"
        ],
        "nb_inputs": 1,
        "outputs": [
            "genomes_ch",
            "done_ch"
        ],
        "nb_outputs": 2,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$chr_id\"",
            "publishDir \"genome_fasta\", mode: 'copy'",
            "conda 'bioconda::entrez-direct'"
        ],
        "when": "",
        "stub": ""
    },
    "build_plsdb": {
        "name_process": "build_plsdb",
        "string_process": "\nprocess build_plsdb {\n    tag \"${contigs}\"\n    publishDir \"${params.name}_results\", mode: 'copy'\n    conda 'bioconda::mash'\n\n    output:\n        file(\"*.fa\") into pls_fa\n        file(\"*.msh\") into pls_db\n\n    script:\n    if(params.plsmsh){\n        \"\"\"\n        cp $params.plsmsh pls_ref.msh\n        echo \"\" > empty.fa\n        \"\"\"\n    }else{\n        \"\"\"\n        for f in $params.plspath; do cat \\$f >> pls_genome_collection.fa; done\n        mash sketch -i pls_genome_collection.fa -o pls_ref.msh\n        \"\"\"\n    }\n}",
        "nb_lignes_process": 21,
        "string_script": "    if(params.plsmsh){\n        \"\"\"\n        cp $params.plsmsh pls_ref.msh\n        echo \"\" > empty.fa\n        \"\"\"\n    }else{\n        \"\"\"\n        for f in $params.plspath; do cat \\$f >> pls_genome_collection.fa; done\n        mash sketch -i pls_genome_collection.fa -o pls_ref.msh\n        \"\"\"\n    }",
        "nb_lignes_script": 10,
        "language_script": "bash",
        "tools": [
            "Mash"
        ],
        "tools_url": [
            "https://bio.tools/mash"
        ],
        "tools_dico": [
            {
                "name": "Mash",
                "uri": "https://bio.tools/mash",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2533",
                            "term": "DNA mutation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2269",
                            "term": "Statistics and probability"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix generation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Phylogenetic distance matrix generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix construction"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Fast genome and metagenome distance estimation using MinHash.",
                "homepage": "https://github.com/marbl/mash"
            }
        ],
        "inputs": [],
        "nb_inputs": 0,
        "outputs": [
            "pls_fa",
            "pls_db"
        ],
        "nb_outputs": 2,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"${contigs}\"",
            "publishDir \"${params.name}_results\", mode: 'copy'",
            "conda 'bioconda::mash'"
        ],
        "when": "",
        "stub": ""
    },
    "mash_plasmids": {
        "name_process": "mash_plasmids",
        "string_process": "\nprocess mash_plasmids {\n    tag \"${contigs}\"\n    publishDir \"${params.name}_results\", mode: 'copy'\n    conda 'bioconda::mash'\n\n    input:\n        file(msh) from pls_db\n        file(fa) from pls_fa\n        \n    output:\n        file(\"*.tsv\") into pls_result\n    \n    script:\n    if (params.contigs_as_ref){\n        \"\"\"\n        mash sketch -i $contigs -o ${params.name}_ref.msh\n        mash dist -i -v 0.1 -d 0.1 ${params.name}_ref.msh $fa > ${params.name}_pls_mash_rev.tsv\n        \"\"\"\n    } else {\n        \"\"\"\n        mash dist -i -v 0.1 -d 0.1 $msh $contigs > ${params.name}_pls_mash.tsv\n        \"\"\"\n    }\n}",
        "nb_lignes_process": 23,
        "string_script": "    if (params.contigs_as_ref){\n        \"\"\"\n        mash sketch -i $contigs -o ${params.name}_ref.msh\n        mash dist -i -v 0.1 -d 0.1 ${params.name}_ref.msh $fa > ${params.name}_pls_mash_rev.tsv\n        \"\"\"\n    } else {\n        \"\"\"\n        mash dist -i -v 0.1 -d 0.1 $msh $contigs > ${params.name}_pls_mash.tsv\n        \"\"\"\n    }",
        "nb_lignes_script": 9,
        "language_script": "bash",
        "tools": [
            "Mash"
        ],
        "tools_url": [
            "https://bio.tools/mash"
        ],
        "tools_dico": [
            {
                "name": "Mash",
                "uri": "https://bio.tools/mash",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2533",
                            "term": "DNA mutation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2269",
                            "term": "Statistics and probability"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix generation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Phylogenetic distance matrix generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix construction"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Fast genome and metagenome distance estimation using MinHash.",
                "homepage": "https://github.com/marbl/mash"
            }
        ],
        "inputs": [
            "pls_db",
            "pls_fa"
        ],
        "nb_inputs": 2,
        "outputs": [
            "pls_result"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"${contigs}\"",
            "publishDir \"${params.name}_results\", mode: 'copy'",
            "conda 'bioconda::mash'"
        ],
        "when": "",
        "stub": ""
    },
    "build_chrdb": {
        "name_process": "build_chrdb",
        "string_process": "\nprocess build_chrdb {\n    tag \"${contigs}\"\n    publishDir \"${params.name}_results\", mode: 'copy'\n    conda 'bioconda::mash'\n\n    output:\n        file(\"*.fa\") into chr_fa\n        file(\"*.msh\") into chr_db\n\n    script:\n    if(params.chrmsh){\n        \"\"\"\n        cp $params.chrmsh chr_ref.msh\n        echo \"\" > empty.fa\n        \"\"\"\n    }else{\n        \"\"\"\n        for f in $params.chrpath; do cat \\$f >> chr_genome_collection.fa; done\n        mash sketch -i chr_genome_collection.fa -o chr_ref.msh\n        \"\"\"\n    }\n}",
        "nb_lignes_process": 21,
        "string_script": "    if(params.chrmsh){\n        \"\"\"\n        cp $params.chrmsh chr_ref.msh\n        echo \"\" > empty.fa\n        \"\"\"\n    }else{\n        \"\"\"\n        for f in $params.chrpath; do cat \\$f >> chr_genome_collection.fa; done\n        mash sketch -i chr_genome_collection.fa -o chr_ref.msh\n        \"\"\"\n    }",
        "nb_lignes_script": 10,
        "language_script": "bash",
        "tools": [
            "Mash"
        ],
        "tools_url": [
            "https://bio.tools/mash"
        ],
        "tools_dico": [
            {
                "name": "Mash",
                "uri": "https://bio.tools/mash",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2533",
                            "term": "DNA mutation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2269",
                            "term": "Statistics and probability"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix generation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Phylogenetic distance matrix generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix construction"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Fast genome and metagenome distance estimation using MinHash.",
                "homepage": "https://github.com/marbl/mash"
            }
        ],
        "inputs": [],
        "nb_inputs": 0,
        "outputs": [
            "chr_fa",
            "chr_db"
        ],
        "nb_outputs": 2,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"${contigs}\"",
            "publishDir \"${params.name}_results\", mode: 'copy'",
            "conda 'bioconda::mash'"
        ],
        "when": "",
        "stub": ""
    },
    "mash_chromosomes": {
        "name_process": "mash_chromosomes",
        "string_process": "\nprocess mash_chromosomes {\n    tag \"${contigs}\"\n    publishDir \"${params.name}_results\", mode: 'copy'\n    conda 'bioconda::mash'\n\n    input:\n        file(msh) from chr_db\n        file(fa) from chr_fa\n        \n    output:\n        file(\"*.tsv\") into chr_result\n    \n    script:\n    if (params.contigs_as_ref){\n        \"\"\"\n        mash sketch -i $contigs -o ${params.name}_ref.msh\n        mash dist -i -v 0.1 -d 0.1 ${params.name}_ref.msh $fa > ${params.name}_chr_mash_rev.tsv\n        \"\"\"\n    } else {\n        \"\"\"\n        mash dist -i -v 0.1 -d 0.1 $msh $contigs > ${params.name}_chr_mash.tsv\n        \"\"\"\n    }\n}",
        "nb_lignes_process": 23,
        "string_script": "    if (params.contigs_as_ref){\n        \"\"\"\n        mash sketch -i $contigs -o ${params.name}_ref.msh\n        mash dist -i -v 0.1 -d 0.1 ${params.name}_ref.msh $fa > ${params.name}_chr_mash_rev.tsv\n        \"\"\"\n    } else {\n        \"\"\"\n        mash dist -i -v 0.1 -d 0.1 $msh $contigs > ${params.name}_chr_mash.tsv\n        \"\"\"\n    }",
        "nb_lignes_script": 9,
        "language_script": "bash",
        "tools": [
            "Mash"
        ],
        "tools_url": [
            "https://bio.tools/mash"
        ],
        "tools_dico": [
            {
                "name": "Mash",
                "uri": "https://bio.tools/mash",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2533",
                            "term": "DNA mutation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2269",
                            "term": "Statistics and probability"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix generation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Phylogenetic distance matrix generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix construction"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Fast genome and metagenome distance estimation using MinHash.",
                "homepage": "https://github.com/marbl/mash"
            }
        ],
        "inputs": [
            "chr_db",
            "chr_fa"
        ],
        "nb_inputs": 2,
        "outputs": [
            "chr_result"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"${contigs}\"",
            "publishDir \"${params.name}_results\", mode: 'copy'",
            "conda 'bioconda::mash'"
        ],
        "when": "",
        "stub": ""
    },
    "kraken": {
        "name_process": "kraken",
        "string_process": "\nprocess kraken {\n    tag \"${contigs}\"\n    publishDir \"./${params.name}_results/kraken\", mode: 'copy'\n    conda 'bioconda::kraken2'\n\n    output:\n        file(\"*\")\n        file(\"*.krakenout\") into krakenout_ch                                      \n    \n    script:\n    \"\"\"\n    kraken2 --db $params.krakendb $contigs\\\n    --unclassified-out ${params.name}_unclassified.tsv --classified-out ${params.name}_classified.tsv \\\n    --memory-mapping --use-names \\\n    --report ${params.name}_report.tsv --output ${params.name}.krakenout\n    \"\"\"\n}",
        "nb_lignes_process": 16,
        "string_script": "    \"\"\"\n    kraken2 --db $params.krakendb $contigs\\\n    --unclassified-out ${params.name}_unclassified.tsv --classified-out ${params.name}_classified.tsv \\\n    --memory-mapping --use-names \\\n    --report ${params.name}_report.tsv --output ${params.name}.krakenout\n    \"\"\"",
        "nb_lignes_script": 5,
        "language_script": "bash",
        "tools": [
            "kraken2"
        ],
        "tools_url": [
            "https://bio.tools/kraken2"
        ],
        "tools_dico": [
            {
                "name": "kraken2",
                "uri": "https://bio.tools/kraken2",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3460",
                                    "term": "Taxonomic classification"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3460",
                                    "term": "Taxonomy assignment"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_3494",
                                "term": "DNA sequence"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_3028",
                                "term": "Taxonomy"
                            }
                        ]
                    }
                ],
                "description": "Kraken 2 is the newest version of Kraken, a taxonomic classification system using exact k-mer matches to achieve high accuracy and fast classification speeds. This classifier matches each k-mer within a query sequence to the lowest common ancestor (LCA) of all genomes containing the given k-mer. The k-mer assignments inform the classification algorithm.",
                "homepage": "https://ccb.jhu.edu/software/kraken2/"
            }
        ],
        "inputs": [],
        "nb_inputs": 0,
        "outputs": [
            "krakenout_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"${contigs}\"",
            "publishDir \"./${params.name}_results/kraken\", mode: 'copy'",
            "conda 'bioconda::kraken2'"
        ],
        "when": "",
        "stub": ""
    },
    "abricate": {
        "name_process": "abricate",
        "string_process": "\nprocess abricate {\n    tag \"${contigs}\"\n    publishDir \"${params.name}_results\", mode: 'copy'\n    conda 'bioconda::abricate'\n\n    output:\n        file(\"*.tsv\")\n    \n    script:\n    \"\"\"\n    abricate --db resfinder $contigs > ${params.name}_resfinder_amr.tsv\n    abricate --db plasmidfinder $contigs > ${params.name}_plsfinder_pmlst.tsv\n    \"\"\"\n}",
        "nb_lignes_process": 13,
        "string_script": "    \"\"\"\n    abricate --db resfinder $contigs > ${params.name}_resfinder_amr.tsv\n    abricate --db plasmidfinder $contigs > ${params.name}_plsfinder_pmlst.tsv\n    \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [
            "ABRicate"
        ],
        "tools_url": [
            "https://bio.tools/ABRicate"
        ],
        "tools_dico": [
            {
                "name": "ABRicate",
                "uri": "https://bio.tools/ABRicate",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3301",
                            "term": "Microbiology"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3482",
                                    "term": "Antimicrobial resistance prediction"
                                }
                            ],
                            []
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_3494",
                                "term": "DNA sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_1234",
                                "term": "Sequence set (nucleic acid)"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0916",
                                "term": "Gene report"
                            }
                        ]
                    }
                ],
                "description": "Mass screening of contigs for antimicrobial resistance or virulence genes.",
                "homepage": "https://github.com/tseemann/abricate"
            }
        ],
        "inputs": [],
        "nb_inputs": 0,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"${contigs}\"",
            "publishDir \"${params.name}_results\", mode: 'copy'",
            "conda 'bioconda::abricate'"
        ],
        "when": "",
        "stub": ""
    },
    "result_collage": {
        "name_process": "result_collage",
        "string_process": "\nprocess result_collage{\n    publishDir \"${params.name}_results\", mode: 'copy'\n    conda 'r::r-tidyverse'\n\n    input:\n        file(chr_mash_out) from chr_result\n        file(pls_mash_out) from pls_result\n    \n    output:\n        file(\"*.tsv\")\n\n    script:\n    if (params.contigs_as_ref){\n        \"\"\"\n        chr_mash_result_edit_rev.R $chr_mash_out $params.chr_info ${params.name}_signf_mash_chr_rev.tsv\n        plsdb_mash_result_edit_rev.R $pls_mash_out $params.pls_info ${params.name}_signf_mash_pls_rev.tsv\n        \"\"\"\n    }else{\n        \"\"\"\n        chr_mash_result_edit.R $chr_mash_out $params.chr_info ${params.name}_signf_mash_chr.tsv\n        plsdb_mash_result_edit.R $pls_mash_out $params.pls_info ${params.name}_signf_mash_pls.tsv\n        \"\"\"\n    }\n}",
        "nb_lignes_process": 23,
        "string_script": "    if (params.contigs_as_ref){\n        \"\"\"\n        chr_mash_result_edit_rev.R $chr_mash_out $params.chr_info ${params.name}_signf_mash_chr_rev.tsv\n        plsdb_mash_result_edit_rev.R $pls_mash_out $params.pls_info ${params.name}_signf_mash_pls_rev.tsv\n        \"\"\"\n    }else{\n        \"\"\"\n        chr_mash_result_edit.R $chr_mash_out $params.chr_info ${params.name}_signf_mash_chr.tsv\n        plsdb_mash_result_edit.R $pls_mash_out $params.pls_info ${params.name}_signf_mash_pls.tsv\n        \"\"\"\n    }",
        "nb_lignes_script": 10,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "chr_result",
            "pls_result"
        ],
        "nb_inputs": 2,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "publishDir \"${params.name}_results\", mode: 'copy'",
            "conda 'r::r-tidyverse'"
        ],
        "when": "",
        "stub": ""
    },
    "reformat": {
        "name_process": "reformat",
        "string_process": "\nprocess reformat {\n\n    conda 'agbiome::bbtools'\n    tag \"$sampleId\"\n    publishDir \"${params.outdir}/paired_reads\", mode: 'copy'\n    \n    input:\n    set sampleId, file(read1), file(read2) from trimmed_reads\n\n    output:\n    set val(sampleId), file(\"interleaved_${sampleId}.fq\") into paired_reads\n\n    script:\n    \"\"\"\n    reformat.sh in1=$read1 in2=$read2 out=interleaved_${sampleId}.fq\n    \"\"\"\n}",
        "nb_lignes_process": 16,
        "string_script": "    \"\"\"\n    reformat.sh in1=$read1 in2=$read2 out=interleaved_${sampleId}.fq\n    \"\"\"",
        "nb_lignes_script": 2,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "trimmed_reads"
        ],
        "nb_inputs": 1,
        "outputs": [
            "paired_reads"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "conda 'agbiome::bbtools'",
            "tag \"$sampleId\"",
            "publishDir \"${params.outdir}/paired_reads\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "init_map": {
        "name_process": "init_map",
        "string_process": "\nprocess init_map {\n    conda 'bioconda::samtools bioconda::bwa'\n    tag \"$sampleId\"\n    publishDir \"${params.out}/init_map\", mode: 'copy'\n    cpus 10\n    memory '100 GB'\n    input:\n    set sampleId, file(reads) from paired_reads\n\n    output:\n    set val(sampleId), file(\"*.bam\") into inimap_ch\n\n    script:\n    \"\"\"\n    # assume contigs are already indexed -- avoids different init_map processes\n    # overwriting each other's index.\n    bwa mem -t 9 $contigs -p $reads \\\n    | samtools view -bS - \\\n    | samtools sort -@ 1 -n - withdup_${sampleId}_map2${location}\n    \"\"\"\n}",
        "nb_lignes_process": 20,
        "string_script": "    \"\"\"\n    # assume contigs are already indexed -- avoids different init_map processes\n    # overwriting each other's index.\n    bwa mem -t 9 $contigs -p $reads \\\n    | samtools view -bS - \\\n    | samtools sort -@ 1 -n - withdup_${sampleId}_map2${location}\n    \"\"\"",
        "nb_lignes_script": 6,
        "language_script": "bash",
        "tools": [
            "BWA",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/bwa",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "paired_reads"
        ],
        "nb_inputs": 1,
        "outputs": [
            "inimap_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "conda 'bioconda::samtools bioconda::bwa'",
            "tag \"$sampleId\"",
            "publishDir \"${params.out}/init_map\", mode: 'copy'",
            "cpus 10",
            "memory '100 GB'"
        ],
        "when": "",
        "stub": ""
    },
    "dedup": {
        "name_process": "dedup",
        "string_process": "\nprocess dedup {\n    container 'docker://staphb/samtools:1.11'\n    tag \"$sampleId\"\n    publishDir \"${params.out}/dedup_outputs\", mode: 'copy'\n    cpus 8\n    memory '10 GB'\n    input:\n    set val(sampleId), file(withdup) from inimap_ch\n\n    output:\n    file(\"*.bam\")\n    set val(sampleId), file(\"*R1.fq\"), file(\"*R2.fq\") into dedup_ch\n\n    \"\"\"\n    samtools fixmate -@ 7 -m $withdup - \\\n    | samtools sort -@ 7 - -T tmp0 -o tmp1.bam\n    samtools markdup -@ 7 -r -s tmp1.bam tmp_dedup_${sampleId}_map2${location}.bam\n    samtools sort -n -@ 8 tmp_dedup_${sampleId}_map2${location}.bam -o dedup_${sampleId}_map2${location}.namesort.bam\n    samtools bam2fq dedup_${sampleId}_map2${location}.namesort.bam \\\n        -1 dedup_${sampleId}_map2${location}_R1.fq \\\n        -2 dedup_${sampleId}_map2${location}_R2.fq \\\n        -s singleton.fq\n    rm -f tmp*.bam singleton.fq\n    \"\"\"\n}",
        "nb_lignes_process": 24,
        "string_script": "\"\"\"\n    samtools fixmate -@ 7 -m $withdup - \\\n    | samtools sort -@ 7 - -T tmp0 -o tmp1.bam\n    samtools markdup -@ 7 -r -s tmp1.bam tmp_dedup_${sampleId}_map2${location}.bam\n    samtools sort -n -@ 8 tmp_dedup_${sampleId}_map2${location}.bam -o dedup_${sampleId}_map2${location}.namesort.bam\n    samtools bam2fq dedup_${sampleId}_map2${location}.namesort.bam \\\n        -1 dedup_${sampleId}_map2${location}_R1.fq \\\n        -2 dedup_${sampleId}_map2${location}_R2.fq \\\n        -s singleton.fq\n    rm -f tmp*.bam singleton.fq\n    \"\"\"",
        "nb_lignes_script": 10,
        "language_script": "bash",
        "tools": [
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "inimap_ch"
        ],
        "nb_inputs": 1,
        "outputs": [
            "dedup_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "container 'docker://staphb/samtools:1.11'",
            "tag \"$sampleId\"",
            "publishDir \"${params.out}/dedup_outputs\", mode: 'copy'",
            "cpus 8",
            "memory '10 GB'"
        ],
        "when": "",
        "stub": ""
    },
    "map_reads": {
        "name_process": "map_reads",
        "string_process": "\nprocess map_reads {\n    queue 'workq'\n    memory '100 GB'\n    cpus 20\n    executor 'pbs'\n\n    conda '/shared/homes/149306/miniconda3/envs/bwa'\n    tag \"$sampleId\"\n    publishDir \"${params.outdir}/mapped_bams\", mode: 'copy'\n\n\n    input:\n    set sampleId, path(reads) from paired_reads\n\n    output:\n    file(\"*.bam\") into results\n\n    script:\n    \"\"\"\n    bwa mem -5SP $params.wgcontigs $reads | \\\n    samtools view -F 0x904 -bS - | \\\n    samtools sort -n -o ${sampleId}_WGctg.bam\n    bwa mem -5SP $params.shcontigs $reads | \\\n    samtools view -F 0x904 -bS - | \\\n    samtools sort -n -o ${sampleId}_SHctg.bam\n    \"\"\"\n\n}",
        "nb_lignes_process": 27,
        "string_script": "    \"\"\"\n    bwa mem -5SP $params.wgcontigs $reads | \\\n    samtools view -F 0x904 -bS - | \\\n    samtools sort -n -o ${sampleId}_WGctg.bam\n    bwa mem -5SP $params.shcontigs $reads | \\\n    samtools view -F 0x904 -bS - | \\\n    samtools sort -n -o ${sampleId}_SHctg.bam\n    \"\"\"",
        "nb_lignes_script": 7,
        "language_script": "bash",
        "tools": [
            "BWA",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/bwa",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "paired_reads"
        ],
        "nb_inputs": 1,
        "outputs": [
            "results"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "queue 'workq'",
            "memory '100 GB'",
            "cpus 20",
            "executor 'pbs'",
            "conda '/shared/homes/149306/miniconda3/envs/bwa'",
            "tag \"$sampleId\"",
            "publishDir \"${params.outdir}/mapped_bams\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "varcall": {
        "name_process": "varcall",
        "string_process": "\nprocess varcall {\n  conda \"bioconda::lofreq\"                                                      \n  tag \"$bam.simpleName\"\n  publishDir \"${params.out}/vcf_files\", mode: 'copy'\n\n  input:\n    file(bam) from bam4vcf\n\n  output:\n    file(\"*.vcf\") into vcf_ch\n\n  script:\n    \"\"\"\n    lofreq call -f $contigs -m 20 --no-default-filter -o ${bam.simpleName}.vcf $bam\n    lofreq filter -v 3 -V 500 -i ${bam.simpleName}.vcf -o ${bam.simpleName}.filt.vcf\n    \"\"\"       \n}",
        "nb_lignes_process": 16,
        "string_script": "    \"\"\"\n    lofreq call -f $contigs -m 20 --no-default-filter -o ${bam.simpleName}.vcf $bam\n    lofreq filter -v 3 -V 500 -i ${bam.simpleName}.vcf -o ${bam.simpleName}.filt.vcf\n    \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "bam4vcf"
        ],
        "nb_inputs": 1,
        "outputs": [
            "vcf_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "conda \"bioconda::lofreq\"",
            "tag \"$bam.simpleName\"",
            "publishDir \"${params.out}/vcf_files\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "vcf_index": {
        "name_process": "vcf_index",
        "string_process": "\nprocess vcf_index {\n  tag \"$vcf.simpleName\"\n  publishDir \"${params.out}/vcf_files\", mode: 'copy'\n    \n  input:\n    file(vcf) from vcf_ch\n\n  output:\n    file(\"*\")\n    \n  script:\n    \"\"\"\n    bgzip --index -@ 16 $vcf\n    \"\"\"\n}",
        "nb_lignes_process": 14,
        "string_script": "    \"\"\"\n    bgzip --index -@ 16 $vcf\n    \"\"\"",
        "nb_lignes_script": 2,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "vcf_ch"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$vcf.simpleName\"",
            "publishDir \"${params.out}/vcf_files\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "merge": {
        "name_process": "merge",
        "string_process": "\nprocess merge{\n  publishDir \"${params.OutputDir}/trimmed\", mode: 'copy'\n\n  input:\n    path '*_R1.fastq.gz' from tread1_ch.toList()\n    path '*_R2.fastq.gz' from tread2_ch.toList()\n  \n  output:\n    set file(\"*_R1.fastq.gz\"), file(\"*_R2.fastq.gz\") into mergedreads_ch\n\n  script:\n    \"\"\"\n    cat *_R1.fastq.gz > merged_${params.contigname}_R1.fastq.gz\n    cat *_R2.fastq.gz > merged_${params.contigname}_R2.fastq.gz\n    \"\"\"\n\n}",
        "nb_lignes_process": 16,
        "string_script": "    \"\"\"\n    cat *_R1.fastq.gz > merged_${params.contigname}_R1.fastq.gz\n    cat *_R2.fastq.gz > merged_${params.contigname}_R2.fastq.gz\n    \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "tread1_ch",
            "tread2_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            "mergedreads_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "publishDir \"${params.OutputDir}/trimmed\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "metaflye_assembly": {
        "name_process": "metaflye_assembly",
        "string_process": "\nprocess metaflye_assembly{\n  tag \"$sampleId\"\n  publishDir \"${params.out}/assembly\", mode: 'copy'\n\n  input:\n    tuple val(sampleId), file(longread) from longread_ch\n\n  output:\n    tuple val(sampleId), file(\"flye_${sampleId}/*\") into assembly_result\n    tuple val(sampleId), file(\"${sampleId}_assembly.gfa\") into graph_ch\n  \n  when:\n    contig_flag == false\n\n  script:\n    \"\"\"\n    flye --nano-raw $longread \\\n      --meta --genome-size $params.gs \\\n      -t 16 -o flye_$sampleId\n    cp flye_${sampleId}/assembly_graph.gfa ${sampleId}_assembly.gfa\n    \"\"\"\n}",
        "nb_lignes_process": 21,
        "string_script": "    \"\"\"\n    flye --nano-raw $longread \\\n      --meta --genome-size $params.gs \\\n      -t 16 -o flye_$sampleId\n    cp flye_${sampleId}/assembly_graph.gfa ${sampleId}_assembly.gfa\n    \"\"\"",
        "nb_lignes_script": 5,
        "language_script": "bash",
        "tools": [
            "Flye"
        ],
        "tools_url": [
            "https://bio.tools/Flye"
        ],
        "tools_dico": [
            {
                "name": "Flye",
                "uri": "https://bio.tools/Flye",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0196",
                            "term": "Sequence assembly"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3673",
                            "term": "Whole genome sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3673",
                            "term": "Genome sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3673",
                            "term": "WGS"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0523",
                                    "term": "Mapping assembly"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0524",
                                    "term": "De-novo assembly"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Genome assembly"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0523",
                                    "term": "Sequence assembly (mapping assembly)"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0524",
                                    "term": "De Bruijn graph"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0524",
                                    "term": "Sequence assembly (de-novo assembly)"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Sequence assembly (genome assembly)"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Genomic assembly"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Flye is a de novo assembler for single molecule sequencing reads, such as those produced by PacBio and Oxford Nanopore Technologies. It is designed for a wide range of datasets, from small bacterial projects to large mammalian-scale assemblies. The package represents a complete pipeline: it takes raw PB / ONT reads as input and outputs polished contigs.",
                "homepage": "https://github.com/fenderglass/Flye"
            }
        ],
        "inputs": [
            "longread_ch"
        ],
        "nb_inputs": 1,
        "outputs": [
            "assembly_result",
            "graph_ch"
        ],
        "nb_outputs": 2,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$sampleId\"",
            "publishDir \"${params.out}/assembly\", mode: 'copy'"
        ],
        "when": "contig_flag == false",
        "stub": ""
    },
    "ntedit_polish": {
        "name_process": "ntedit_polish",
        "string_process": "\nprocess ntedit_polish{  \n  tag \"$sampleId\"\n  publishDir \"${params.out}/polished_assembly\", mode: 'copy'\n\n  input:\n    tuple file(merged_read1), file(merged_read2) from mergedreads_ch\n    tuple val(sampleId), file(graph) from graph_ch\n\n  output:\n    file(\"*\")\n    file(\"${sampleId}_assembly_edited.fa\") into newcontig\n\n  when:\n    contig_flag == false\n\n  script:\n    \"\"\"\n    flye_gfa_to_fasta_for_polishing.py $graph ${sampleId}_assembly.fa\n    nthits -c 1 --outbloom -p solidBF_${sampleId} -b 36 -k 40 -t 16 $merged_read1 $merged_read2\n    ntedit -m 1 -f ${sampleId}_assembly.fa -r solidBF_${sampleId}_k40.bf -b ${sampleId}_assembly\n    flye_polished_fa_to_gfa.py $graph ${sampleId}_assembly_edited.fa ${sampleId}_assembly_edited.gfa\n    \"\"\"\n}",
        "nb_lignes_process": 22,
        "string_script": "    \"\"\"\n    flye_gfa_to_fasta_for_polishing.py $graph ${sampleId}_assembly.fa\n    nthits -c 1 --outbloom -p solidBF_${sampleId} -b 36 -k 40 -t 16 $merged_read1 $merged_read2\n    ntedit -m 1 -f ${sampleId}_assembly.fa -r solidBF_${sampleId}_k40.bf -b ${sampleId}_assembly\n    flye_polished_fa_to_gfa.py $graph ${sampleId}_assembly_edited.fa ${sampleId}_assembly_edited.gfa\n    \"\"\"",
        "nb_lignes_script": 5,
        "language_script": "bash",
        "tools": [
            "ntEdit"
        ],
        "tools_url": [
            "https://bio.tools/ntEdit"
        ],
        "tools_dico": [
            {
                "name": "ntEdit",
                "uri": "https://bio.tools/ntEdit",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0196",
                            "term": "Sequence assembly"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3216",
                                    "term": "Scaffolding"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Genome assembly"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3216",
                                    "term": "Scaffold construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3216",
                                    "term": "Scaffold generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Sequence assembly (genome assembly)"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0525",
                                    "term": "Genomic assembly"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Scalable genomics application for polishing genome assembly drafts. It simplifies polishing and \"haploidization\" of gene and genome sequences with its re-usable Bloom filter design.",
                "homepage": "https://github.com/bcgsc/ntedit"
            }
        ],
        "inputs": [
            "mergedreads_ch",
            "graph_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            "newcontig"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$sampleId\"",
            "publishDir \"${params.out}/polished_assembly\", mode: 'copy'"
        ],
        "when": "contig_flag == false",
        "stub": ""
    },
    "mash_sketch": {
        "name_process": "mash_sketch",
        "string_process": "\nprocess mash_sketch {\n    publishDir \"sketches\", mode: 'copy'\n    conda 'bioconda::mash'\n\n    input:\n        file(contigs) from contigs_ch\n    \n    when:\n        ready_flag = true\n    \n    output:\n        file(\"*.msh\") into sketch_ch\n  \n    script:\n    \"\"\"\n    mash sketch -i $contigs\n    \"\"\"\n}",
        "nb_lignes_process": 17,
        "string_script": "    \"\"\"\n    mash sketch -i $contigs\n    \"\"\"",
        "nb_lignes_script": 2,
        "language_script": "bash",
        "tools": [
            "Mash"
        ],
        "tools_url": [
            "https://bio.tools/mash"
        ],
        "tools_dico": [
            {
                "name": "Mash",
                "uri": "https://bio.tools/mash",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2533",
                            "term": "DNA mutation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2269",
                            "term": "Statistics and probability"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix generation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Phylogenetic distance matrix generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix construction"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Fast genome and metagenome distance estimation using MinHash.",
                "homepage": "https://github.com/marbl/mash"
            }
        ],
        "inputs": [
            "contigs_ch"
        ],
        "nb_inputs": 1,
        "outputs": [
            "sketch_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "publishDir \"sketches\", mode: 'copy'",
            "conda 'bioconda::mash'"
        ],
        "when": "ready_flag = true",
        "stub": ""
    },
    "mash_dist": {
        "name_process": "mash_dist",
        "string_process": "\nprocess mash_dist {\n    publishDir \"mash_dist\", mode: 'copy'\n    conda 'bioconda::mash'\n\n    input:\n        path(ref) from sketch_ch\n        file(query) from genomes_ch\n    \n    output:\n        file(\"*.tsv\") into mash_result\n\n    script:\n    \"\"\"\n    mash dist -v 0.1 -d 0.1 $ref $query > ${query.baseName}_mash.tsv\n    \"\"\"\n}",
        "nb_lignes_process": 15,
        "string_script": "    \"\"\"\n    mash dist -v 0.1 -d 0.1 $ref $query > ${query.baseName}_mash.tsv\n    \"\"\"",
        "nb_lignes_script": 2,
        "language_script": "bash",
        "tools": [
            "Mash"
        ],
        "tools_url": [
            "https://bio.tools/mash"
        ],
        "tools_dico": [
            {
                "name": "Mash",
                "uri": "https://bio.tools/mash",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_2533",
                            "term": "DNA mutation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2269",
                            "term": "Statistics and probability"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix generation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Phylogenetic distance matrix generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0289",
                                    "term": "Sequence distance matrix construction"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Fast genome and metagenome distance estimation using MinHash.",
                "homepage": "https://github.com/marbl/mash"
            }
        ],
        "inputs": [
            "sketch_ch",
            "genomes_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            "mash_result"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "publishDir \"mash_dist\", mode: 'copy'",
            "conda 'bioconda::mash'"
        ],
        "when": "",
        "stub": ""
    },
    "MetaBat2": {
        "name_process": "MetaBat2",
        "string_process": "\nprocess MetaBat2 {\n\n        tag \"$location\"\n        publishDir \"${params.out}/metabat2\", mode: 'copy'\n\n    input:\n        file('*')  from sortedbam.toList()\n\n    output:\n        file(\"metabat*\")\n\n    script:\n        \"\"\"\n        jgi_summarize_bam_contig_depths --outputDepth Depth.txt --showDepth *\n        metabat2 -i $contigs -a Depth.txt -o metabat_$location/bin\n        mv Depth.txt metabat_$location\n        \"\"\"\n\n}",
        "nb_lignes_process": 18,
        "string_script": "        \"\"\"\n        jgi_summarize_bam_contig_depths --outputDepth Depth.txt --showDepth *\n        metabat2 -i $contigs -a Depth.txt -o metabat_$location/bin\n        mv Depth.txt metabat_$location\n        \"\"\"",
        "nb_lignes_script": 4,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "sortedbam"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$location\"",
            "publishDir \"${params.out}/metabat2\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "metaphlan2": {
        "name_process": "metaphlan2",
        "string_process": "\nprocess metaphlan2 {\n\n  conda '/shared/homes/149306/metaphlan2_testing/meta_env.yaml'\n  cpus 8\n  memory '12 GB'\n  queue 'workq'\n  executor 'pbspro'\n\n      tag \"$sampleId\"\n      publishDir \"metaphlan2_out\", mode: 'copy'\n\n    input:\n        set sampleId, file(reads) from trimmed_reads\n\n    output:\n        set val(sampleId), file(\"${sampleId}.bt2out\") into metaphlan_res\n        set val(sampleId), file(\"${sampleId}.mph2\")\n\n    script:\n\n        \"\"\"\n        /shared/homes/149306/bin/metaphlan/metaphlan.py $reads --nproc 8 --input_type multifastq --bt2_ps very-sensitive \\\n        --bowtie2db /shared/homes/149306/bin/metaphlan/bowtie2db/mpa --bowtie2out ${sampleId}.bt2out > ${sampleId}.mph2\n        \"\"\"\n\n}",
        "nb_lignes_process": 25,
        "string_script": "        \"\"\"\n        /shared/homes/149306/bin/metaphlan/metaphlan.py $reads --nproc 8 --input_type multifastq --bt2_ps very-sensitive \\\n        --bowtie2db /shared/homes/149306/bin/metaphlan/bowtie2db/mpa --bowtie2out ${sampleId}.bt2out > ${sampleId}.mph2\n        \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "trimmed_reads"
        ],
        "nb_inputs": 1,
        "outputs": [
            "metaphlan_res",
            "sampleId"
        ],
        "nb_outputs": 2,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "conda '/shared/homes/149306/metaphlan2_testing/meta_env.yaml'",
            "cpus 8",
            "memory '12 GB'",
            "queue 'workq'",
            "executor 'pbspro'",
            "tag \"$sampleId\"",
            "publishDir \"metaphlan2_out\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "merge_reads": {
        "name_process": "merge_reads",
        "string_process": "\nprocess merge_reads{\n  publishDir \"${params.out}/trimmed\", mode: 'copy'\n\n  input:\n    path '*_R1.fastq.gz' from tread1_ch.toList()\n    path '*_R2.fastq.gz' from tread2_ch.toList()\n  \n  output:\n    tuple file(\"*_R1.fastq.gz\"), file(\"*_R2.fastq.gz\") into mergedreads_ch\n\n  when:\n    contig_flag == false\n\n  script:\n    \"\"\"\n    cat *_R1.fastq.gz > merged_${params.contigname}_R1.fastq.gz\n    cat *_R2.fastq.gz > merged_${params.contigname}_R2.fastq.gz\n    \"\"\"\n\n}",
        "nb_lignes_process": 19,
        "string_script": "    \"\"\"\n    cat *_R1.fastq.gz > merged_${params.contigname}_R1.fastq.gz\n    cat *_R2.fastq.gz > merged_${params.contigname}_R2.fastq.gz\n    \"\"\"",
        "nb_lignes_script": 3,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "tread1_ch",
            "tread2_ch"
        ],
        "nb_inputs": 2,
        "outputs": [
            "mergedreads_ch"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "publishDir \"${params.out}/trimmed\", mode: 'copy'"
        ],
        "when": "contig_flag == false",
        "stub": ""
    },
    "metaBat2": {
        "name_process": "metaBat2",
        "string_process": "\nprocess metaBat2 {\n  tag \"$params.contigname\"\n  publishDir \"${params.out}/metabat2\", mode: 'copy'\n\n  input:\n    file('*')  from sortedbam.toList()\n\n  output:\n    file(\"metabat*\")\n\n  script:\n    \"\"\"\n    jgi_summarize_bam_contig_depths --outputDepth Depth.txt --showDepth *\n    metabat2 -i $contigs -a Depth.txt -o metabat_$params.contigname/bin\n    mv Depth.txt metabat_$params.contigname\n    \"\"\"\n}",
        "nb_lignes_process": 16,
        "string_script": "    \"\"\"\n    jgi_summarize_bam_contig_depths --outputDepth Depth.txt --showDepth *\n    metabat2 -i $contigs -a Depth.txt -o metabat_$params.contigname/bin\n    mv Depth.txt metabat_$params.contigname\n    \"\"\"",
        "nb_lignes_script": 4,
        "language_script": "bash",
        "tools": [],
        "tools_url": [],
        "tools_dico": [],
        "inputs": [
            "sortedbam"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "tag \"$params.contigname\"",
            "publishDir \"${params.out}/metabat2\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "mapping_sh": {
        "name_process": "mapping_sh",
        "string_process": "\nprocess mapping_sh{\n  queue 'workq'\n  memory '20 GB'\n  cpus  8\n  executor 'pbspro'\n\n        tag \"$sampleId\"\n        conda 'bioconda::bwa; bioconda::samtools'\n        publishDir \"${params.outdir_sh}/bwa\", mode: 'copy'\n\n    input:\n        set val(sampleId), file(read1), file(read2) from trimmed_sh\n\n    output:\n        set file(\"*.txt\"), file(\"*.bam\")  into results_sh\n\n    script:\n        \"\"\"\n        bwa index $contigs_sh -p SH.contigs.fa\n        bwa mem SH.contigs.fa $read1 $read2 | samtools view -S -b - > ${sampleId}_mapped.bam\n        samtools flagstat ${sampleId}_mapped.bam > ${sampleId}_flagstat.txt\n        \"\"\"\n}",
        "nb_lignes_process": 22,
        "string_script": "        \"\"\"\n        bwa index $contigs_sh -p SH.contigs.fa\n        bwa mem SH.contigs.fa $read1 $read2 | samtools view -S -b - > ${sampleId}_mapped.bam\n        samtools flagstat ${sampleId}_mapped.bam > ${sampleId}_flagstat.txt\n        \"\"\"",
        "nb_lignes_script": 4,
        "language_script": "bash",
        "tools": [
            "BWA",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/bwa",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "trimmed_sh"
        ],
        "nb_inputs": 1,
        "outputs": [
            "results_sh"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "queue 'workq'",
            "memory '20 GB'",
            "cpus 8",
            "executor 'pbspro'",
            "tag \"$sampleId\"",
            "conda 'bioconda::bwa; bioconda::samtools'",
            "publishDir \"${params.outdir_sh}/bwa\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "mapping_wg": {
        "name_process": "mapping_wg",
        "string_process": "\nprocess mapping_wg{\n  queue 'workq'\n  memory '20 GB'\n  cpus  8\n  executor 'pbspro'\n\n        tag \"$sampleId\"\n        conda 'bioconda::bwa; bioconda::samtools'\n        publishDir \"${params.outdir_wg}/bwa\", mode: 'copy'\n\n    input:\n        set val(sampleId), file(read1), file(read2) from trimmed_wg\n\n    output:\n        set file(\"*.txt\"), file(\"*.bam\")  into results_wg\n\n    script:\n        \"\"\"\n        bwa index $contigs_wg -p WG.contigs.fa\n        bwa mem WG.contigs.fa $read1 $read2 | samtools view -S -b - > ${sampleId}_mapped.bam\n        samtools flagstat ${sampleId}_mapped.bam > ${sampleId}_flagstat.txt\n        \"\"\"\n}",
        "nb_lignes_process": 22,
        "string_script": "        \"\"\"\n        bwa index $contigs_wg -p WG.contigs.fa\n        bwa mem WG.contigs.fa $read1 $read2 | samtools view -S -b - > ${sampleId}_mapped.bam\n        samtools flagstat ${sampleId}_mapped.bam > ${sampleId}_flagstat.txt\n        \"\"\"",
        "nb_lignes_script": 4,
        "language_script": "bash",
        "tools": [
            "BWA",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/bwa",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "trimmed_wg"
        ],
        "nb_inputs": 1,
        "outputs": [
            "results_wg"
        ],
        "nb_outputs": 1,
        "name_workflow": "chewbeckie__Outbreak_EnrichmentCulture",
        "directive": [
            "queue 'workq'",
            "memory '20 GB'",
            "cpus 8",
            "executor 'pbspro'",
            "tag \"$sampleId\"",
            "conda 'bioconda::bwa; bioconda::samtools'",
            "publishDir \"${params.outdir_wg}/bwa\", mode: 'copy'"
        ],
        "when": "",
        "stub": ""
    }
}