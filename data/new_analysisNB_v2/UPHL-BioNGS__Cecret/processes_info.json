{
    "fastqc": {
        "name_process": "fastqc",
        "string_process": "\nprocess fastqc {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"$sample\"\n  cpus 1\n  container 'staphb/fastqc:latest'\n\n  when:\n  params.fastqc && sample != null\n\n  input:\n  tuple val(sample), file(raw), val(type) from fastq_reads_fastqc\n\n  output:\n  file(\"${task.process}/*.{html,zip}\")\n  file(\"${task.process}/*_fastqc.zip\") into fastqc_files\n  tuple sample, env(raw_1) into fastqc_1_results\n  tuple sample, env(raw_2) into fastqc_2_results\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    fastqc --version >> $log_file\n\n    fastqc !{params.fastqc_options} \\\n      --outdir !{task.process} \\\n      --threads !{task.cpus} \\\n      !{raw} \\\n      2>> $err_file >> $log_file\n\n    zipped_fastq=($(ls !{task.process}/*fastqc.zip) \"\")\n\n    raw_1=$(unzip -p ${zipped_fastq[0]} */fastqc_data.txt | grep \"Total Sequences\" | awk '{ print $3 }' )\n    raw_2=NA\n    if [ -f \"${zipped_fastq[1]}\" ] ; then raw_2=$(unzip -p !{task.process}/*fastqc.zip */fastqc_data.txt | grep \"Total Sequences\" | awk '{ print $3 }' ) ; fi\n\n    if [ -z \"$raw_1\" ] ; then raw_1=\"0\" ; fi\n    if [ -z \"$raw_2\" ] ; then raw_2=\"0\" ; fi\n  '''\n}",
        "nb_lignes_process": 44,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    fastqc --version >> $log_file\n\n    fastqc !{params.fastqc_options} \\\n      --outdir !{task.process} \\\n      --threads !{task.cpus} \\\n      !{raw} \\\n      2>> $err_file >> $log_file\n\n    zipped_fastq=($(ls !{task.process}/*fastqc.zip) \"\")\n\n    raw_1=$(unzip -p ${zipped_fastq[0]} */fastqc_data.txt | grep \"Total Sequences\" | awk '{ print $3 }' )\n    raw_2=NA\n    if [ -f \"${zipped_fastq[1]}\" ] ; then raw_2=$(unzip -p !{task.process}/*fastqc.zip */fastqc_data.txt | grep \"Total Sequences\" | awk '{ print $3 }' ) ; fi\n\n    if [ -z \"$raw_1\" ] ; then raw_1=\"0\" ; fi\n    if [ -z \"$raw_2\" ] ; then raw_2=\"0\" ; fi\n  '''",
        "nb_lignes_script": 23,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "FastQC"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/fastqc"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "FastQC",
                "uri": "https://bio.tools/fastqc",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3572",
                            "term": "Data quality management"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical calculation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3218",
                                    "term": "Sequencing quality control"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0236",
                                    "term": "Sequence composition calculation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Significance testing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical testing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical test"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2238",
                                    "term": "Statistical analysis"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3218",
                                    "term": "Sequencing QC"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3218",
                                    "term": "Sequencing quality assessment"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0848",
                                "term": "Raw sequence"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_2955",
                                "term": "Sequence report"
                            }
                        ]
                    }
                ],
                "description": "This tool aims to provide a QC report which can spot problems or biases which originate either in the sequencer or in the starting library material. It can be run in one of two modes. It can either run as a stand alone interactive application for the immediate analysis of small numbers of FastQ files, or it can be run in a non-interactive mode where it would be suitable for integrating into a larger analysis pipeline for the systematic processing of large numbers of files.",
                "homepage": "http://www.bioinformatics.babraham.ac.uk/projects/fastqc/"
            }
        ],
        "inputs": [
            "fastq_reads_fastqc"
        ],
        "nb_inputs": 1,
        "outputs": [
            "fastqc_files",
            "fastqc_1_results",
            "fastqc_2_results"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"$sample\"",
            "cpus 1",
            "container 'staphb/fastqc:latest'"
        ],
        "when": "params.fastqc && sample != null",
        "stub": ""
    },
    "seqyclean": {
        "name_process": "seqyclean",
        "string_process": " process seqyclean {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"${sample}\"\n    cpus 1\n    container 'staphb/seqyclean:latest'\n\n    when:\n    sample != null\n\n    input:\n    tuple val(sample), file(reads), val(paired_single) from fastq_reads_seqyclean\n\n    output:\n    tuple sample, file(\"${task.process}/${sample}_clean_PE{1,2}.fastq.gz\") optional true into paired_files\n    tuple sample, file(\"${task.process}/${sample}_cln_SE.fastq.gz\") optional true into single_files\n    tuple sample, file(\"${task.process}/${sample}_clean_PE{1,2}.fastq.gz\"), val(paired_single) optional true into paired_files_kraken2\n    tuple sample, file(\"${task.process}/${sample}_cln_SE.fastq.gz\"), val(paired_single) optional true into single_files_kraken2\n    file(\"${task.process}/${sample}_cl*n_SummaryStatistics.tsv\") into seqyclean_files, seqyclean_files_collect\n    file(\"${task.process}/${sample}_cl*n_SummaryStatistics.txt\")\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n    tuple sample, env(perc_kept) into seqyclean_perc_kept_results\n    tuple sample, env(kept) into seqyclean_pairskept_results\n    tuple sample, env(cleaner_version) into cleaner_version\n\n    shell:\n    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      echo \"seqyclean version: $(seqyclean -h | grep Version)\" >> $log_file\n      cleaner_version=\"seqyclean : $(seqyclean -h | grep Version)\"\n\n      kept=''\n      perc_kept=''\n\n      if [ \"!{paired_single}\" == \"single\" ]\n      then\n        seqyclean !{params.seqyclean_options} \\\n          -c !{params.seqyclean_contaminant_file} \\\n          -U !{reads} \\\n          -o !{task.process}/!{sample}_cln \\\n          -gz \\\n          2>> $err_file >> $log_file\n        kept=$(cut -f 36 !{task.process}/!{sample}_cln_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n        perc_kept=$(cut -f 37 !{task.process}/!{sample}_cln_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n      else\n        seqyclean !{params.seqyclean_options} \\\n          -c !{params.seqyclean_contaminant_file} \\\n          -1 !{reads[0]} -2 !{reads[1]} \\\n          -o !{task.process}/!{sample}_clean \\\n          -gz \\\n          2>> $err_file >> $log_file\n        kept=$(cut -f 58 !{task.process}/!{sample}_clean_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n        perc_kept=$(cut -f 59 !{task.process}/!{sample}_clean_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n      fi\n\n      if [ -z \"$kept\" ] ; then kept=\"0\" ; fi\n      if [ -z \"$perc_kept\" ] ; then perc_kept=\"0\" ; fi\n    '''\n  }",
        "nb_lignes_process": 61,
        "string_script": "    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      echo \"seqyclean version: $(seqyclean -h | grep Version)\" >> $log_file\n      cleaner_version=\"seqyclean : $(seqyclean -h | grep Version)\"\n\n      kept=''\n      perc_kept=''\n\n      if [ \"!{paired_single}\" == \"single\" ]\n      then\n        seqyclean !{params.seqyclean_options} \\\n          -c !{params.seqyclean_contaminant_file} \\\n          -U !{reads} \\\n          -o !{task.process}/!{sample}_cln \\\n          -gz \\\n          2>> $err_file >> $log_file\n        kept=$(cut -f 36 !{task.process}/!{sample}_cln_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n        perc_kept=$(cut -f 37 !{task.process}/!{sample}_cln_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n      else\n        seqyclean !{params.seqyclean_options} \\\n          -c !{params.seqyclean_contaminant_file} \\\n          -1 !{reads[0]} -2 !{reads[1]} \\\n          -o !{task.process}/!{sample}_clean \\\n          -gz \\\n          2>> $err_file >> $log_file\n        kept=$(cut -f 58 !{task.process}/!{sample}_clean_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n        perc_kept=$(cut -f 59 !{task.process}/!{sample}_clean_SummaryStatistics.tsv | grep -v \"Kept\" | head -n 1)\n      fi\n\n      if [ -z \"$kept\" ] ; then kept=\"0\" ; fi\n      if [ -z \"$perc_kept\" ] ; then perc_kept=\"0\" ; fi\n    '''",
        "nb_lignes_script": 36,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "fastq_reads_seqyclean"
        ],
        "nb_inputs": 1,
        "outputs": [
            "paired_files",
            "single_files",
            "paired_files_kraken2",
            "single_files_kraken2",
            "seqyclean_files",
            "seqyclean_files_collect",
            "seqyclean_perc_kept_results",
            "seqyclean_pairskept_results",
            "cleaner_version"
        ],
        "nb_outputs": 9,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/seqyclean:latest'"
        ],
        "when": "sample != null",
        "stub": ""
    },
    "fastp": {
        "name_process": "fastp",
        "string_process": " process fastp {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"${sample}\"\n    cpus 1\n    container 'bromberglab/fastp:latest'\n\n    when:\n    sample != null\n\n    input:\n    tuple val(sample), file(reads), val(paired_single) from fastq_reads_fastp\n\n    output:\n    tuple sample, file(\"${task.process}/${sample}_clean_PE{1,2}.fastq.gz\") optional true into paired_files\n    tuple sample, file(\"${task.process}/${sample}_cln.fastq.gz\") optional true into single_files\n    tuple sample, file(\"${task.process}/${sample}_clean_PE{1,2}.fastq.gz\"), val(paired_single) optional true into paired_files_kraken2\n    tuple sample, file(\"${task.process}/${sample}_cln.fastq.gz\"), val(paired_single) optional true into single_files_kraken2\n    file(\"${task.process}/${sample}_fastp.html\")\n    file(\"${task.process}/${sample}_fastp.json\") into fastp_files\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n    tuple sample, env(passed_reads) into fastp_results\n    tuple sample, env(cleaner_version) into cleaner_version\n\n    shell:\n    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      fastp --version >> $log_file 2>> $err_file\n      cleaner_version=\"$(fastp --version 2>&1 | head -n 1)\"\n\n      if [ \"!{paired_single}\" == \"single\" ]\n      then\n        fastp !{params.fastp_options} \\\n          -i !{reads} \\\n          -o !{task.process}/!{sample}_cln.fastq.gz \\\n          -h !{task.process}/!{sample}_fastp.html \\\n          -j !{task.process}/!{sample}_fastp.json \\\n          2>> $err_file >> $log_file\n      else\n        fastp !{params.fastp_options} \\\n          -i !{reads[0]} \\\n          -I !{reads[1]} \\\n          -o !{task.process}/!{sample}_clean_PE1.fastq.gz \\\n          -O !{task.process}/!{sample}_clean_PE2.fastq.gz \\\n          -h !{task.process}/!{sample}_fastp.html \\\n          -j !{task.process}/!{sample}_fastp.json \\\n          2>> $err_file >> $log_file\n      fi\n\n      passed_reads=$(grep \"reads passed filter\" $err_file | tail -n 1 | cut -f 2 -d \":\" | sed 's/ //g' )\n      if [ -z \"$passed_reads\" ] ; then passed_reads=\"0\" ; fi\n    '''\n  }",
        "nb_lignes_process": 55,
        "string_script": "    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      fastp --version >> $log_file 2>> $err_file\n      cleaner_version=\"$(fastp --version 2>&1 | head -n 1)\"\n\n      if [ \"!{paired_single}\" == \"single\" ]\n      then\n        fastp !{params.fastp_options} \\\n          -i !{reads} \\\n          -o !{task.process}/!{sample}_cln.fastq.gz \\\n          -h !{task.process}/!{sample}_fastp.html \\\n          -j !{task.process}/!{sample}_fastp.json \\\n          2>> $err_file >> $log_file\n      else\n        fastp !{params.fastp_options} \\\n          -i !{reads[0]} \\\n          -I !{reads[1]} \\\n          -o !{task.process}/!{sample}_clean_PE1.fastq.gz \\\n          -O !{task.process}/!{sample}_clean_PE2.fastq.gz \\\n          -h !{task.process}/!{sample}_fastp.html \\\n          -j !{task.process}/!{sample}_fastp.json \\\n          2>> $err_file >> $log_file\n      fi\n\n      passed_reads=$(grep \"reads passed filter\" $err_file | tail -n 1 | cut -f 2 -d \":\" | sed 's/ //g' )\n      if [ -z \"$passed_reads\" ] ; then passed_reads=\"0\" ; fi\n    '''",
        "nb_lignes_script": 31,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "fastPHASE"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/fastphase"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "fastPHASE",
                "uri": "https://bio.tools/fastphase",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3056",
                            "term": "Population genetics"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3454",
                                    "term": "Phasing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "fastPHASE is a program to estimate missing genotypes and unobserved haplotypes. It is an implementation of the model described in Scheet & Stephens (2006). This is a cluster-based model for haplotype variation, and gains its utility from implicitly modeling the genealogy of chromosomes in a random sample from a population as a tree but summarizing all haplotype variation in the \"tips\" of the trees.",
                "homepage": "http://scheet.org/software.html"
            }
        ],
        "inputs": [
            "fastq_reads_fastp"
        ],
        "nb_inputs": 1,
        "outputs": [
            "paired_files",
            "single_files",
            "paired_files_kraken2",
            "single_files_kraken2",
            "fastp_files",
            "fastp_results",
            "cleaner_version"
        ],
        "nb_outputs": 7,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'bromberglab/fastp:latest'"
        ],
        "when": "sample != null",
        "stub": ""
    },
    "bwa": {
        "name_process": "bwa",
        "string_process": " process bwa {\n    publishDir \"${params.outdir}\", mode: 'copy', pattern: \"logs/bwa/*.{log,err}\"\n    tag \"${sample}\"\n    cpus params.maxcpus\n    container 'staphb/bwa:latest'\n\n    input:\n    tuple val(sample), file(reads), file(reference_genome) from paired_files.concat(single_files).combine(reference_genome)\n\n    output:\n    tuple sample, file(\"aligned/${sample}.sam\") into sams, sams_filter\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n    tuple sample, env(bwa_version) into aligner_version\n\n    shell:\n    '''\n      mkdir -p aligned logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      echo \"bwa $(bwa 2>&1 | grep Version )\" >> $log_file\n      bwa_version=\"bwa : \"$(bwa 2>&1 | grep Version)\n\n      # index the reference fasta file\n      bwa index !{reference_genome}\n\n      # bwa mem command\n      bwa mem -t !{task.cpus} !{reference_genome} !{reads} 2>> $err_file > aligned/!{sample}.sam\n    '''\n  }",
        "nb_lignes_process": 30,
        "string_script": "    '''\n      mkdir -p aligned logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      echo \"bwa $(bwa 2>&1 | grep Version )\" >> $log_file\n      bwa_version=\"bwa : \"$(bwa 2>&1 | grep Version)\n\n      # index the reference fasta file\n      bwa index !{reference_genome}\n\n      # bwa mem command\n      bwa mem -t !{task.cpus} !{reference_genome} !{reads} 2>> $err_file > aligned/!{sample}.sam\n    '''",
        "nb_lignes_script": 15,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "BWA"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/bwa"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "BWA",
                "uri": "https://bio.tools/bwa",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3211",
                                    "term": "Genome indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3429",
                                    "term": "Construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment construction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Oligonucleotide alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short sequence read mapping"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3198",
                                    "term": "Short read alignment"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment generation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0292",
                                    "term": "Sequence alignment construction"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_2044",
                                "term": "Sequence"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_2012",
                                "term": "Sequence coordinates"
                            },
                            {
                                "uri": "http://edamontology.org/data_1916",
                                "term": "Alignment"
                            },
                            {
                                "uri": "http://edamontology.org/data_3210",
                                "term": "Genome index"
                            }
                        ]
                    }
                ],
                "description": "Fast, accurate, memory-efficient aligner for short and long sequencing reads",
                "homepage": "http://bio-bwa.sourceforge.net"
            }
        ],
        "inputs": [
            "paired_files",
            "reference_genome",
            "single_files"
        ],
        "nb_inputs": 3,
        "outputs": [
            "sams",
            "sams_filter",
            "aligner_version"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy', pattern: \"logs/bwa/*.{log,err}\"",
            "tag \"${sample}\"",
            "cpus params.maxcpus",
            "container 'staphb/bwa:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "minimap2": {
        "name_process": "minimap2",
        "string_process": " process minimap2 {\n    publishDir \"${params.outdir}\", mode: 'copy', pattern: \"logs/minimap2/*.{log,err}\"\n    tag \"${sample}\"\n    cpus params.maxcpus\n    container 'staphb/minimap2:latest'\n\n    input:\n    tuple val(sample), file(reads), file(reference_genome) from paired_files.concat(single_files).combine(reference_genome)\n\n    output:\n    tuple sample, file(\"aligned/${sample}.sam\") into sams, sams_filter\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n    tuple sample, env(minimap2_version) into aligner_version\n\n    shell:\n    '''\n      mkdir -p aligned logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      minimap2 --version >> $log_file\n      minimap2_version=$(echo \"minimap2 : \"$(minimap2 --version))\n\n      minimap2 !{params.minimap2_options} \\\n        -ax sr -t !{task.cpus} \\\n        -o aligned/!{sample}.sam \\\n        !{reference_genome} !{reads} 2>> $err_file >> $log_file\n    '''\n  }",
        "nb_lignes_process": 29,
        "string_script": "    '''\n      mkdir -p aligned logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      minimap2 --version >> $log_file\n      minimap2_version=$(echo \"minimap2 : \"$(minimap2 --version))\n\n      minimap2 !{params.minimap2_options} \\\n        -ax sr -t !{task.cpus} \\\n        -o aligned/!{sample}.sam \\\n        !{reference_genome} !{reads} 2>> $err_file >> $log_file\n    '''",
        "nb_lignes_script": 14,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "Minimap2"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/minimap2"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "Minimap2",
                "uri": "https://bio.tools/minimap2",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0491",
                                    "term": "Pairwise sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0491",
                                    "term": "Pairwise alignment"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Pairwise aligner for genomic and spliced nucleotide sequences",
                "homepage": "https://github.com/lh3/minimap2"
            }
        ],
        "inputs": [
            "paired_files",
            "reference_genome",
            "single_files"
        ],
        "nb_inputs": 3,
        "outputs": [
            "sams",
            "sams_filter",
            "aligner_version"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy', pattern: \"logs/minimap2/*.{log,err}\"",
            "tag \"${sample}\"",
            "cpus params.maxcpus",
            "container 'staphb/minimap2:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "sort": {
        "name_process": "sort",
        "string_process": "\nprocess sort {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus params.maxcpus\n  container 'staphb/samtools:latest'\n\n  input:\n  tuple val(sample), file(sam) from sams\n\n  output:\n  tuple sample, file(\"aligned/${sample}.sorted.bam\") into pre_trim_bams, pre_trim_bams2\n  tuple sample, file(\"aligned/${sample}.sorted.bam\"), file(\"aligned/${sample}.sorted.bam.bai\") into pre_trim_bams_bamsnap, pre_trim_bams_bedtools\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p aligned logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools sort !{sam} 2>> $err_file | \\\n      samtools view -F 4 -o aligned/!{sample}.sorted.bam 2>> $err_file >> $log_file\n\n    # indexing the bams\n    samtools index aligned/!{sample}.sorted.bam 2>> $err_file >> $log_file\n  '''\n}",
        "nb_lignes_process": 30,
        "string_script": "  '''\n    mkdir -p aligned logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools sort !{sam} 2>> $err_file | \\\n      samtools view -F 4 -o aligned/!{sample}.sorted.bam 2>> $err_file >> $log_file\n\n    # indexing the bams\n    samtools index aligned/!{sample}.sorted.bam 2>> $err_file >> $log_file\n  '''",
        "nb_lignes_script": 14,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "sams"
        ],
        "nb_inputs": 1,
        "outputs": [
            "pre_trim_bams",
            "pre_trim_bams2",
            "pre_trim_bams_bamsnap",
            "pre_trim_bams_bedtools"
        ],
        "nb_outputs": 4,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus params.maxcpus",
            "container 'staphb/samtools:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "filter": {
        "name_process": "filter",
        "string_process": "\nprocess filter {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n\n  when:\n  params.filter\n\n  input:\n  tuple val(sample), file(sam) from sams_filter\n\n  output:\n  tuple sample, file(\"${task.process}/${sample}_filtered_{R1,R2}.fastq.gz\") optional true into filtered_reads\n  file(\"${task.process}/${sample}_filtered_unpaired.fastq.gz\") optional true\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools sort -n !{sam} 2>> $err_file | \\\n      samtools fastq -F 4 !{params.filter_options} \\\n      -s !{task.process}/!{sample}_filtered_unpaired.fastq.gz \\\n      -1 !{task.process}/!{sample}_filtered_R1.fastq.gz \\\n      -2 !{task.process}/!{sample}_filtered_R2.fastq.gz \\\n      2>> $err_file >> $log_file\n  '''\n}",
        "nb_lignes_process": 34,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools sort -n !{sam} 2>> $err_file | \\\n      samtools fastq -F 4 !{params.filter_options} \\\n      -s !{task.process}/!{sample}_filtered_unpaired.fastq.gz \\\n      -1 !{task.process}/!{sample}_filtered_R1.fastq.gz \\\n      -2 !{task.process}/!{sample}_filtered_R2.fastq.gz \\\n      2>> $err_file >> $log_file\n  '''",
        "nb_lignes_script": 15,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "sams_filter"
        ],
        "nb_inputs": 1,
        "outputs": [
            "filtered_reads"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "params.filter",
        "stub": ""
    },
    "ivar_trim": {
        "name_process": "ivar_trim",
        "string_process": " process ivar_trim {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"${sample}\"\n    cpus 1\n    container 'staphb/ivar:latest'\n\n    input:\n    tuple val(sample), file(bam), file(primer_bed) from pre_trim_bams.combine(primer_bed)\n\n    output:\n    tuple sample, file(\"${task.process}/${sample}.primertrim.sorted.bam\") into trimmed_bams, trimmed_bams4, trimmed_bams5\n    tuple sample, file(\"${task.process}/${sample}.primertrim.sorted.bam\"), file(\"ivar_trim/${sample}.primertrim.sorted.bam.bai\") into bam_bai\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n    file(\"${task.process}/${sample}_ivar.log\") into ivar_trim_files\n    tuple sample, env(trimmer_version) into trimmer_version\n\n    shell:\n    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      ivar version >> $log_file\n      trimmer_version=\"ivar : $(ivar version | grep version)\"\n\n      # trimming the reads\n      ivar trim !{params.ivar_trim_options} -e -i !{bam} -b !{primer_bed} -p !{task.process}/!{sample}.primertrim 2>> $err_file >> $log_file\n\n      grep \"Found\" -A 10000 $log_file | grep -A 10000 \"primers in BED file\" > !{task.process}/!{sample}_ivar.log\n\n      # sorting and indexing the trimmed bams\n      samtools sort !{task.process}/!{sample}.primertrim.bam -o !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n      samtools index !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n    '''\n  }",
        "nb_lignes_process": 35,
        "string_script": "    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      ivar version >> $log_file\n      trimmer_version=\"ivar : $(ivar version | grep version)\"\n\n      # trimming the reads\n      ivar trim !{params.ivar_trim_options} -e -i !{bam} -b !{primer_bed} -p !{task.process}/!{sample}.primertrim 2>> $err_file >> $log_file\n\n      grep \"Found\" -A 10000 $log_file | grep -A 10000 \"primers in BED file\" > !{task.process}/!{sample}_ivar.log\n\n      # sorting and indexing the trimmed bams\n      samtools sort !{task.process}/!{sample}.primertrim.bam -o !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n      samtools index !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n    '''",
        "nb_lignes_script": 18,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "AIVAR",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/AIVAR",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "AIVAR",
                "uri": "https://bio.tools/AIVAR",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3474",
                            "term": "Machine learning"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Targeted exome capture"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "WES"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Whole exome sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome capture"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3461",
                                    "term": "Virulence prediction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3225",
                                    "term": "Variant classification"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3461",
                                    "term": "Pathogenicity prediction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Assessing concordance among human, in silico predictions and functional assays on genetic variant classification.",
                "homepage": "https://github.com/TopGene/AIvar"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "pre_trim_bams",
            "primer_bed"
        ],
        "nb_inputs": 2,
        "outputs": [
            "trimmed_bams",
            "trimmed_bams4",
            "trimmed_bams5",
            "bam_bai",
            "ivar_trim_files",
            "trimmer_version"
        ],
        "nb_outputs": 6,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/ivar:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "samtools_ampliconclip": {
        "name_process": "samtools_ampliconclip",
        "string_process": " process samtools_ampliconclip {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"${sample}\"\n    cpus 1\n    container 'staphb/samtools:latest'\n\n    input:\n    tuple val(sample), file(bam), file(primer_bed) from pre_trim_bams.combine(primer_bed)\n\n    output:\n    tuple sample, file(\"${task.process}/${sample}.primertrim.sorted.bam\") into trimmed_bams, trimmed_bams4, trimmed_bams5\n    tuple sample, file(\"${task.process}/${sample}.primertrim.sorted.bam\"), file(\"${task.process}/${sample}.primertrim.sorted.bam.bai\") into bam_bai\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n    tuple sample, env(trimmer_version) into trimmer_version\n\n    shell:\n    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      samtools --version >> $log_file\n      trimmer_version=\"samtools ampliconclip : $(samtools --version | head -n 1)\"\n\n      # trimming the reads\n      samtools ampliconclip !{params.samtools_ampliconclip_options} -b !{primer_bed} !{bam} 2>> $err_file | \\\n        samtools sort 2>> $err_file |  \\\n        samtools view -F 4 -o !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n\n      samtools index !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n    '''\n  }",
        "nb_lignes_process": 32,
        "string_script": "    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      # time stamp + capturing tool versions\n      date | tee -a $log_file $err_file > /dev/null\n      samtools --version >> $log_file\n      trimmer_version=\"samtools ampliconclip : $(samtools --version | head -n 1)\"\n\n      # trimming the reads\n      samtools ampliconclip !{params.samtools_ampliconclip_options} -b !{primer_bed} !{bam} 2>> $err_file | \\\n        samtools sort 2>> $err_file |  \\\n        samtools view -F 4 -o !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n\n      samtools index !{task.process}/!{sample}.primertrim.sorted.bam 2>> $err_file >> $log_file\n    '''",
        "nb_lignes_script": 16,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "pre_trim_bams",
            "primer_bed"
        ],
        "nb_inputs": 2,
        "outputs": [
            "trimmed_bams",
            "trimmed_bams4",
            "trimmed_bams5",
            "bam_bai",
            "trimmer_version"
        ],
        "nb_outputs": 5,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "ivar_variants": {
        "name_process": "ivar_variants",
        "string_process": "\nprocess ivar_variants {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/ivar:latest'\n  memory {2.GB * task.attempt}\n  errorStrategy 'retry'\n  maxRetries 2\n\n  when:\n  params.ivar_variants\n\n  input:\n  tuple val(sample), file(bam), file(reference_genome), file(gff_file) from trimmed_bams_genome.combine(gff_file)\n\n  output:\n  tuple sample, file(\"${task.process}/${sample}.variants.tsv\")\n  tuple sample, file(\"${task.process}/${sample}.ivar_variants.vcf\") into ivar_variant_file\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n  tuple sample, env(variants_num) into ivar_variants_results\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n    ivar version >> $log_file\n\n    samtools mpileup -A -d !{params.mpileup_depth} -B -Q 0 --reference !{reference_genome} !{bam} 2>> $err_file | \\\n      ivar variants -p !{task.process}/!{sample}.variants !{params.ivar_variants_options} -m !{params.minimum_depth} -r !{reference_genome} -g !{gff_file} 2>> $err_file >> $log_file\n\n    variants_num=$(grep \"TRUE\" !{task.process}/!{sample}.variants.tsv | wc -l)\n\n    if [ -z \"$variants_num\" ] ; then variants_num=\"0\" ; fi\n\n    echo '##fileformat=VCFv4.2' > !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##source=iVar' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##INFO=<ID=DP,Number=1,Type=Integer,Description=\"Total Depth\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FILTER=<ID=PASS,Description=\"Result of p-value <= 0.05\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FILTER=<ID=FAIL,Description=\"Result of p-value > 0.05\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=REF_DP,Number=1,Type=Integer,Description=\"Depth of reference base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=REF_RV,Number=1,Type=Integer,Description=\"Depth of reference base on reverse reads\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=REF_QUAL,Number=1,Type=Integer,Description=\"Mean quality of reference base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_DP,Number=1,Type=Integer,Description=\"Depth of alternate base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_RV,Number=1,Type=Integer,Description=\"Deapth of alternate base on reverse reads\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_QUAL,Number=1,Type=String,Description=\"Mean quality of alternate base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_FREQ,Number=1,Type=String,Description=\"Frequency of alternate base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo -e '#CHROM\\tPOS\\tID\\tREF\\tALT\\tQUAL\\tFILTER\\tINFO\\tFORMAT\\t!{sample}' >> !{task.process}/!{sample}.ivar_variants.vcf\n    tail -n+2 !{task.process}/!{sample}.variants.tsv | \\\n      awk '{print $1 \"\\t\" $2 \"\\t.\\t\" $3 \"\\t\" $4 \"\\t.\\t.\\tREF_DP=\" $5 \";REF_RV=\" $6 \";REF_QUAL=\" $7 \";ALT_DP=\" $8 \";ALT_RV=\" $9 \";ALT_QUAL=\" $10 \"\\tGT:PL\\t1/1:\" $12 \",\" $12-$8 \",\" $8 }' \\\n      >> !{task.process}/!{sample}.ivar_variants.vcf\n  '''\n}",
        "nb_lignes_process": 57,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n    ivar version >> $log_file\n\n    samtools mpileup -A -d !{params.mpileup_depth} -B -Q 0 --reference !{reference_genome} !{bam} 2>> $err_file | \\\n      ivar variants -p !{task.process}/!{sample}.variants !{params.ivar_variants_options} -m !{params.minimum_depth} -r !{reference_genome} -g !{gff_file} 2>> $err_file >> $log_file\n\n    variants_num=$(grep \"TRUE\" !{task.process}/!{sample}.variants.tsv | wc -l)\n\n    if [ -z \"$variants_num\" ] ; then variants_num=\"0\" ; fi\n\n    echo '##fileformat=VCFv4.2' > !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##source=iVar' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##INFO=<ID=DP,Number=1,Type=Integer,Description=\"Total Depth\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FILTER=<ID=PASS,Description=\"Result of p-value <= 0.05\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FILTER=<ID=FAIL,Description=\"Result of p-value > 0.05\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=REF_DP,Number=1,Type=Integer,Description=\"Depth of reference base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=REF_RV,Number=1,Type=Integer,Description=\"Depth of reference base on reverse reads\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=REF_QUAL,Number=1,Type=Integer,Description=\"Mean quality of reference base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_DP,Number=1,Type=Integer,Description=\"Depth of alternate base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_RV,Number=1,Type=Integer,Description=\"Deapth of alternate base on reverse reads\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_QUAL,Number=1,Type=String,Description=\"Mean quality of alternate base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo '##FORMAT=<ID=ALT_FREQ,Number=1,Type=String,Description=\"Frequency of alternate base\">' >> !{task.process}/!{sample}.ivar_variants.vcf\n    echo -e '#CHROM\\tPOS\\tID\\tREF\\tALT\\tQUAL\\tFILTER\\tINFO\\tFORMAT\\t!{sample}' >> !{task.process}/!{sample}.ivar_variants.vcf\n    tail -n+2 !{task.process}/!{sample}.variants.tsv | \\\n      awk '{print $1 \"\\t\" $2 \"\\t.\\t\" $3 \"\\t\" $4 \"\\t.\\t.\\tREF_DP=\" $5 \";REF_RV=\" $6 \";REF_QUAL=\" $7 \";ALT_DP=\" $8 \";ALT_RV=\" $9 \";ALT_QUAL=\" $10 \"\\tGT:PL\\t1/1:\" $12 \",\" $12-$8 \",\" $8 }' \\\n      >> !{task.process}/!{sample}.ivar_variants.vcf\n  '''",
        "nb_lignes_script": 34,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools",
            "AIVAR"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools",
            "https://bio.tools/AIVAR"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            },
            {
                "name": "AIVAR",
                "uri": "https://bio.tools/AIVAR",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3474",
                            "term": "Machine learning"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Targeted exome capture"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "WES"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Whole exome sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome capture"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3461",
                                    "term": "Virulence prediction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3225",
                                    "term": "Variant classification"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3461",
                                    "term": "Pathogenicity prediction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Assessing concordance among human, in silico predictions and functional assays on genetic variant classification.",
                "homepage": "https://github.com/TopGene/AIvar"
            }
        ],
        "inputs": [
            "trimmed_bams_genome",
            "gff_file"
        ],
        "nb_inputs": 2,
        "outputs": [
            "sample",
            "ivar_variant_file",
            "ivar_variants_results"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/ivar:latest'",
            "memory {2.GB * task.attempt}",
            "errorStrategy 'retry'",
            "maxRetries 2"
        ],
        "when": "params.ivar_variants",
        "stub": ""
    },
    "ivar_consensus": {
        "name_process": "ivar_consensus",
        "string_process": "\nprocess ivar_consensus {\n  publishDir \"${params.outdir}\", mode: 'copy', pattern: \"logs/ivar_consensus/*.{log,err}\"\n  publishDir \"${params.outdir}\", mode: 'copy', pattern: \"consensus/*.consensus.fa\"\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/ivar:latest'\n  memory {2.GB * task.attempt}\n  errorStrategy {'retry'}\n  maxRetries 2\n\n  input:\n  tuple val(sample), file(bam), file(reference_genome) from trimmed_bams_ivar_consensus\n\n  output:\n  tuple sample, file(\"consensus/${sample}.consensus.fa\") into consensus_rename\n  file(\"consensus/${sample}.consensus.fa\") into consensus_pangolin, consensus_vadr, consensus_nextclade, consensus_msa\n  file(\"consensus/${sample}.consensus.qual.txt\")\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n  tuple sample, env(num_N), env(num_ACTG), env(num_degenerate), env(num_total), env(first_line) into consensus_results\n  tuple sample, env(ivar_version) into ivar_version\n\n  shell:\n  '''\n    mkdir -p consensus logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n    ivar version >> $log_file\n    ivar_version=$(ivar version | grep \"version\")\n\n    samtools mpileup -A -d !{params.mpileup_depth} -B -Q 0 --reference !{reference_genome} !{bam} 2>> $err_file | \\\n      ivar consensus !{params.ivar_consensus_options} -m !{params.minimum_depth} -p consensus/!{sample}.consensus 2>> $err_file >> $log_file\n\n    if [ -f \"consensus/!{sample}.consensus.fa\" ]\n    then\n      num_N=$(grep -v \">\" consensus/!{sample}.consensus.fa | grep -o 'N' | wc -l )\n      num_ACTG=$(grep -v \">\" consensus/!{sample}.consensus.fa | grep -o -E \"C|A|T|G\" | wc -l )\n      num_degenerate=$(grep -v \">\" consensus/!{sample}.consensus.fa | grep -o -E \"B|D|E|F|H|I|J|K|L|M|O|P|Q|R|S|U|V|W|X|Y|Z\" | wc -l )\n      first_line=$(grep \">\" consensus/!{sample}.consensus.fa | sed 's/>//g' )\n\n      if [ -z \"$num_N\" ] ; then num_N=\"0\" ; fi\n      if [ -z \"$num_ACTG\" ] ; then num_ACTG=\"0\" ; fi\n      if [ -z \"$num_degenerate\" ] ; then num_degenerate=\"0\" ; fi\n      if [ -z \"$first_line\" ] ; then first_line=!{sample} ; fi\n    else\n      num_N=\"0\"\n      num_ACTG=\"0\"\n      num_degenerate=\"0\"\n      first_line=!{sample}\n    fi\n\n    if [ -z \"$num_N\" ] ; then num_N=\"0\" ; fi\n    if [ -z \"$num_ACTG\" ] ; then num_ACTG=\"0\" ; fi\n    if [ -z \"$num_degenerate\" ] ; then num_degenerate=\"0\" ; fi\n    num_total=$(( $num_N + $num_degenerate + $num_ACTG ))\n  '''\n}",
        "nb_lignes_process": 58,
        "string_script": "  '''\n    mkdir -p consensus logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n    ivar version >> $log_file\n    ivar_version=$(ivar version | grep \"version\")\n\n    samtools mpileup -A -d !{params.mpileup_depth} -B -Q 0 --reference !{reference_genome} !{bam} 2>> $err_file | \\\n      ivar consensus !{params.ivar_consensus_options} -m !{params.minimum_depth} -p consensus/!{sample}.consensus 2>> $err_file >> $log_file\n\n    if [ -f \"consensus/!{sample}.consensus.fa\" ]\n    then\n      num_N=$(grep -v \">\" consensus/!{sample}.consensus.fa | grep -o 'N' | wc -l )\n      num_ACTG=$(grep -v \">\" consensus/!{sample}.consensus.fa | grep -o -E \"C|A|T|G\" | wc -l )\n      num_degenerate=$(grep -v \">\" consensus/!{sample}.consensus.fa | grep -o -E \"B|D|E|F|H|I|J|K|L|M|O|P|Q|R|S|U|V|W|X|Y|Z\" | wc -l )\n      first_line=$(grep \">\" consensus/!{sample}.consensus.fa | sed 's/>//g' )\n\n      if [ -z \"$num_N\" ] ; then num_N=\"0\" ; fi\n      if [ -z \"$num_ACTG\" ] ; then num_ACTG=\"0\" ; fi\n      if [ -z \"$num_degenerate\" ] ; then num_degenerate=\"0\" ; fi\n      if [ -z \"$first_line\" ] ; then first_line=!{sample} ; fi\n    else\n      num_N=\"0\"\n      num_ACTG=\"0\"\n      num_degenerate=\"0\"\n      first_line=!{sample}\n    fi\n\n    if [ -z \"$num_N\" ] ; then num_N=\"0\" ; fi\n    if [ -z \"$num_ACTG\" ] ; then num_ACTG=\"0\" ; fi\n    if [ -z \"$num_degenerate\" ] ; then num_degenerate=\"0\" ; fi\n    num_total=$(( $num_N + $num_degenerate + $num_ACTG ))\n  '''",
        "nb_lignes_script": 35,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools",
            "AIVAR"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools",
            "https://bio.tools/AIVAR"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            },
            {
                "name": "AIVAR",
                "uri": "https://bio.tools/AIVAR",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3474",
                            "term": "Machine learning"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Targeted exome capture"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "WES"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Whole exome sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3676",
                            "term": "Exome capture"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3461",
                                    "term": "Virulence prediction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3225",
                                    "term": "Variant classification"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3461",
                                    "term": "Pathogenicity prediction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Assessing concordance among human, in silico predictions and functional assays on genetic variant classification.",
                "homepage": "https://github.com/TopGene/AIvar"
            }
        ],
        "inputs": [
            "trimmed_bams_ivar_consensus"
        ],
        "nb_inputs": 1,
        "outputs": [
            "consensus_rename",
            "consensus_pangolin",
            "consensus_vadr",
            "consensus_nextclade",
            "consensus_msa",
            "consensus_results",
            "ivar_version"
        ],
        "nb_outputs": 7,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy', pattern: \"logs/ivar_consensus/*.{log,err}\"",
            "publishDir \"${params.outdir}\", mode: 'copy', pattern: \"consensus/*.consensus.fa\"",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/ivar:latest'",
            "memory {2.GB * task.attempt}",
            "errorStrategy {'retry'}",
            "maxRetries 2"
        ],
        "when": "",
        "stub": ""
    },
    "fasta_prep": {
        "name_process": "fasta_prep",
        "string_process": "\nprocess fasta_prep {\n  publishDir \"${params.outdir}\", mode: 'copy', overwrite: true\n  tag \"${fasta}\"\n  cpus 1\n  container 'quay.io/biocontainers/pandas:1.1.5'\n\n  when:\n  sample != null && sample != 'input.1'\n\n  input:\n  tuple val(sample), file(fasta) from fastas\n\n  output:\n  tuple sample, env(num_N), env(num_ACTG), env(num_degenerate), env(num_total), env(first_line) into fastas_results\n  file(\"${task.process}/${fasta}\") optional true into fastas_rename, fastas_pangolin, fastas_vadr, fastas_nextclade, fastas_msa\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{workflow.sessionId}.err\n\n    if [ !{fasta} != 'null' ]\n    then\n      echo \">!{sample}\" > !{task.process}/!{fasta}\n      grep -v \">\" !{fasta} | fold -w 75 >> !{task.process}/!{fasta}\n\n      num_N=$(grep -v \">\" !{fasta} | grep -o 'N' | wc -l )\n      num_ACTG=$(grep -v \">\" !{fasta} | grep -o -E \"C|A|T|G\" | wc -l )\n      num_degenerate=$(grep -v \">\" !{fasta} | grep -o -E \"B|D|E|F|H|I|J|K|L|M|O|P|Q|R|S|U|V|W|X|Y|Z\" | wc -l )\n      first_line=$(grep \">\" consensus/!{sample}.consensus.fa | sed 's/>//g' )\n      num_total=$(( $num_N + $num_degenerate + $num_ACTG ))\n\n      if [ -z \"$num_N\" ] ; then num_N=\"0\" ; fi\n      if [ -z \"$num_ACTG\" ] ; then num_ACTG=\"0\" ; fi\n      if [ -z \"$num_degenerate\" ] ; then num_degenerate=\"0\" ; fi\n      if [ -z \"$first_line\" ] ; then first_line=!{sample} ; fi\n      if [ -z \"$num_total\" ] ; then num_total=0 ; fi\n    fi\n  '''\n}",
        "nb_lignes_process": 40,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{workflow.sessionId}.err\n\n    if [ !{fasta} != 'null' ]\n    then\n      echo \">!{sample}\" > !{task.process}/!{fasta}\n      grep -v \">\" !{fasta} | fold -w 75 >> !{task.process}/!{fasta}\n\n      num_N=$(grep -v \">\" !{fasta} | grep -o 'N' | wc -l )\n      num_ACTG=$(grep -v \">\" !{fasta} | grep -o -E \"C|A|T|G\" | wc -l )\n      num_degenerate=$(grep -v \">\" !{fasta} | grep -o -E \"B|D|E|F|H|I|J|K|L|M|O|P|Q|R|S|U|V|W|X|Y|Z\" | wc -l )\n      first_line=$(grep \">\" consensus/!{sample}.consensus.fa | sed 's/>//g' )\n      num_total=$(( $num_N + $num_degenerate + $num_ACTG ))\n\n      if [ -z \"$num_N\" ] ; then num_N=\"0\" ; fi\n      if [ -z \"$num_ACTG\" ] ; then num_ACTG=\"0\" ; fi\n      if [ -z \"$num_degenerate\" ] ; then num_degenerate=\"0\" ; fi\n      if [ -z \"$first_line\" ] ; then first_line=!{sample} ; fi\n      if [ -z \"$num_total\" ] ; then num_total=0 ; fi\n    fi\n  '''",
        "nb_lignes_script": 22,
        "language_script": "bash",
        "tools": [
            "TFold"
        ],
        "tools_url": [
            "https://bio.tools/tfold"
        ],
        "tools_dico": [
            {
                "name": "TFold",
                "uri": "https://bio.tools/tfold",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0082",
                            "term": "Structure prediction"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0099",
                            "term": "RNA"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0659",
                            "term": "Functional, regulatory and non-coding RNA"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0278",
                                    "term": "RNA secondary structure prediction"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "An algorithm for predicting non-coding RNA secondary structures.",
                "homepage": "https://evryrna.ibisc.univ-evry.fr/evryrna/tfold"
            }
        ],
        "inputs": [
            "fastas"
        ],
        "nb_inputs": 1,
        "outputs": [
            "fastas_results",
            "fastas_rename",
            "fastas_pangolin",
            "fastas_vadr",
            "fastas_nextclade",
            "fastas_msa"
        ],
        "nb_outputs": 6,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy', overwrite: true",
            "tag \"${fasta}\"",
            "cpus 1",
            "container 'quay.io/biocontainers/pandas:1.1.5'"
        ],
        "when": "sample != null && sample != 'input.1'",
        "stub": ""
    },
    "bcftools_variants": {
        "name_process": "bcftools_variants",
        "string_process": "\nprocess bcftools_variants {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/bcftools:latest'\n\n  when:\n  params.bcftools_variants\n\n  input:\n  tuple val(sample), file(bam), file(reference_genome) from trimmed_bams_bcftools_variants\n\n  output:\n  tuple sample, file(\"${task.process}/${sample}.vcf\") into bcftools_variants_file\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n  tuple sample, env(variants_num) into bcftools_variants_results\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    bcftools --version >> $log_file\n\n    bcftools mpileup -A -d !{params.mpileup_depth} -B -Q 0 -f !{reference_genome} !{bam} 2>> $err_file | \\\n      bcftools call -mv -Ov -o !{task.process}/!{sample}.vcf 2>> $err_file >> $log_file\n\n    variants_num=$(grep -v \"#\" bcftools_variants/!{sample}.vcf | wc -l)\n    if [ -z \"$variants_num\" ] ; then variants_num=\"0\" ; fi\n  '''\n}",
        "nb_lignes_process": 33,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    bcftools --version >> $log_file\n\n    bcftools mpileup -A -d !{params.mpileup_depth} -B -Q 0 -f !{reference_genome} !{bam} 2>> $err_file | \\\n      bcftools call -mv -Ov -o !{task.process}/!{sample}.vcf 2>> $err_file >> $log_file\n\n    variants_num=$(grep -v \"#\" bcftools_variants/!{sample}.vcf | wc -l)\n    if [ -z \"$variants_num\" ] ; then variants_num=\"0\" ; fi\n  '''",
        "nb_lignes_script": 14,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "BCFtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/bcftools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "BCFtools",
                "uri": "https://bio.tools/bcftools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3516",
                            "term": "Genotyping experiment"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0199",
                            "term": "Genetic variation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS study"
                        },
                        {
                            "uri": "http://edamontology.org/topic_2885",
                            "term": "DNA polymorphism"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0199",
                            "term": "DNA variation"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "GWAS"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3517",
                            "term": "Genome-wide association study"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Data handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant calling"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Utility operation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "File processing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2409",
                                    "term": "Report handling"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3227",
                                    "term": "Variant mapping"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_3498",
                                "term": "Sequence variations"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_3498",
                                "term": "Sequence variations"
                            }
                        ]
                    }
                ],
                "description": "Set of utilities that manipulate variant calls in the Variant Call Format (VCF) and its binary counterpart BCF. All commands work transparently with both VCFs and BCFs, both uncompressed and BGZF-compressed.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "trimmed_bams_bcftools_variants"
        ],
        "nb_inputs": 1,
        "outputs": [
            "bcftools_variants_file",
            "bcftools_variants_results"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/bcftools:latest'"
        ],
        "when": "params.bcftools_variants",
        "stub": ""
    },
    "bamsnap": {
        "name_process": "bamsnap",
        "string_process": "\nprocess bamsnap {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus params.medcpus\n  errorStrategy 'ignore'\n  container 'danielmsk/bamsnap:latest'\n  time '1h'\n\n  when:\n  params.bamsnap\n\n  input:\n  tuple val(sample), file(bam), file(bai), file(ivar), file(bcftools), file(reference_genome) from bamsnap_files\n\n  output:\n  file(\"${task.process}/${sample}/{ivar,bcftools}/*.{png,log}\") optional true\n  file(\"${task.process}/${sample}/*.{png,log}\") optional true\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    bamsnap --version >> $log_file\n\n    if [[ \"!{ivar}\" != *\"input\"* ]]\n    then\n      mkdir -p bamsnap/!{sample}\n      bamsnap \\\n        -draw coordinates bamplot coverage base \\\n        !{params.bamsnap_options} \\\n        -process !{task.cpus} \\\n        -ref !{reference_genome} \\\n        -bam !{bam} \\\n        -vcf !{ivar} \\\n        -out !{task.process}/!{sample}/ivar \\\n        -imagetype png \\\n        -save_image_only 2>> $err_file >> $log_file\n    fi\n\n    if [[ \"!{bcftools}\" != *\"input\"* ]]\n    then\n      mkdir -p bamsnap/!{sample}\n      bamsnap \\\n        -draw coordinates bamplot coverage base \\\n        !{params.bamsnap_options} \\\n        -process !{task.cpus} \\\n        -ref !{reference_genome} \\\n        -bam !{bam} \\\n        -vcf !{bcftools} \\\n        -out !{task.process}/!{sample}/bcftools \\\n        -imagetype png \\\n        -save_image_only 2>> $err_file >> $log_file\n    fi\n  '''\n}",
        "nb_lignes_process": 58,
        "string_script": "  '''\n    mkdir -p logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    bamsnap --version >> $log_file\n\n    if [[ \"!{ivar}\" != *\"input\"* ]]\n    then\n      mkdir -p bamsnap/!{sample}\n      bamsnap \\\n        -draw coordinates bamplot coverage base \\\n        !{params.bamsnap_options} \\\n        -process !{task.cpus} \\\n        -ref !{reference_genome} \\\n        -bam !{bam} \\\n        -vcf !{ivar} \\\n        -out !{task.process}/!{sample}/ivar \\\n        -imagetype png \\\n        -save_image_only 2>> $err_file >> $log_file\n    fi\n\n    if [[ \"!{bcftools}\" != *\"input\"* ]]\n    then\n      mkdir -p bamsnap/!{sample}\n      bamsnap \\\n        -draw coordinates bamplot coverage base \\\n        !{params.bamsnap_options} \\\n        -process !{task.cpus} \\\n        -ref !{reference_genome} \\\n        -bam !{bam} \\\n        -vcf !{bcftools} \\\n        -out !{task.process}/!{sample}/bcftools \\\n        -imagetype png \\\n        -save_image_only 2>> $err_file >> $log_file\n    fi\n  '''",
        "nb_lignes_script": 37,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "bamsnap_files"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus params.medcpus",
            "errorStrategy 'ignore'",
            "container 'danielmsk/bamsnap:latest'",
            "time '1h'"
        ],
        "when": "params.bamsnap",
        "stub": ""
    },
    "samtools_stats": {
        "name_process": "samtools_stats",
        "string_process": "\nprocess samtools_stats {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n\n  when:\n  params.samtools_stats\n\n  input:\n  tuple val(sample), file(aligned), file(trimmed) from pre_post_bams\n\n  output:\n  file(\"${task.process}/${sample}.stats.{aligned,trimmed}.txt\")\n  file(\"${task.process}/${sample}.stats.txt\") optional true into samtools_stats_files\n  tuple sample, env(insert_size_before_trimming) into samtools_stats_before_size_results\n  tuple sample, env(insert_size_after_trimming) into samtools_stats_after_size_results\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools stats !{params.samtools_stats_options} !{aligned} 2>> $err_file | tee !{task.process}/!{sample}.stats.aligned.txt !{task.process}/!{sample}.stats.txt\n    insert_size_before_trimming=$(grep \"insert size average\" !{task.process}/!{sample}.stats.txt | cut -f 3)\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      insert_size_after_trimming=\"NA\"\n    else\n      samtools stats !{params.samtools_stats_options} !{trimmed} 2>> $err_file | tee !{task.process}/!{sample}.stats.trimmed.txt !{task.process}/!{sample}.stats.txt\n      insert_size_after_trimming=$(grep \"insert size average\" !{task.process}/!{sample}.stats.trimmed.txt | cut -f 3)\n    fi\n\n    if [ -z \"$insert_size_before_trimming\" ] ; then insert_size_before_trimming=0 ; fi\n    if [ -z \"$insert_size_after_trimming\" ] ; then insert_size_after_trimming=0 ; fi\n  '''\n}",
        "nb_lignes_process": 42,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools stats !{params.samtools_stats_options} !{aligned} 2>> $err_file | tee !{task.process}/!{sample}.stats.aligned.txt !{task.process}/!{sample}.stats.txt\n    insert_size_before_trimming=$(grep \"insert size average\" !{task.process}/!{sample}.stats.txt | cut -f 3)\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      insert_size_after_trimming=\"NA\"\n    else\n      samtools stats !{params.samtools_stats_options} !{trimmed} 2>> $err_file | tee !{task.process}/!{sample}.stats.trimmed.txt !{task.process}/!{sample}.stats.txt\n      insert_size_after_trimming=$(grep \"insert size average\" !{task.process}/!{sample}.stats.trimmed.txt | cut -f 3)\n    fi\n\n    if [ -z \"$insert_size_before_trimming\" ] ; then insert_size_before_trimming=0 ; fi\n    if [ -z \"$insert_size_after_trimming\" ] ; then insert_size_after_trimming=0 ; fi\n  '''",
        "nb_lignes_script": 21,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "pre_post_bams"
        ],
        "nb_inputs": 1,
        "outputs": [
            "samtools_stats_files",
            "samtools_stats_before_size_results",
            "samtools_stats_after_size_results"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "params.samtools_stats",
        "stub": ""
    },
    "samtools_coverage": {
        "name_process": "samtools_coverage",
        "string_process": "\nprocess samtools_coverage {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n\n  when:\n  params.samtools_coverage\n\n  input:\n  tuple val(sample), file(aligned), file(trimmed) from pre_post_bams2\n\n  output:\n  file(\"${task.process}/${sample}.cov.{aligned,trimmed}.{txt,hist}\") optional true\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n  tuple sample, env(coverage) into samtools_coverage_results\n  tuple sample, env(depth) into samtools_covdepth_results\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools coverage !{params.samtools_coverage_options} !{aligned} -m -o !{task.process}/!{sample}.cov.aligned.hist 2>> $err_file >> $log_file\n    samtools coverage !{params.samtools_coverage_options} !{aligned}    -o !{task.process}/!{sample}.cov.aligned.txt  2>> $err_file >> $log_file\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      coverage=$(cut -f 6 !{task.process}/!{sample}.cov.aligned.txt | tail -n 1)\n      depth=$(cut    -f 7 !{task.process}/!{sample}.cov.aligned.txt | tail -n 1)\n    else\n      samtools coverage !{params.samtools_coverage_options} !{trimmed} -m -o !{task.process}/!{sample}.cov.trimmed.hist 2>> $err_file >> $log_file\n      samtools coverage !{params.samtools_coverage_options} !{trimmed}    -o !{task.process}/!{sample}.cov.trimmed.txt  2>> $err_file >> $log_file\n      coverage=$(cut -f 6 !{task.process}/!{sample}.cov.trimmed.txt | tail -n 1)\n      depth=$(cut    -f 7 !{task.process}/!{sample}.cov.trimmed.txt | tail -n 1)\n    fi\n\n    if [ -z \"$coverage\" ] ; then coverage=\"0\" ; fi\n    if [ -z \"$depth\" ] ; then depth=\"0\" ; fi\n  '''\n}",
        "nb_lignes_process": 44,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools coverage !{params.samtools_coverage_options} !{aligned} -m -o !{task.process}/!{sample}.cov.aligned.hist 2>> $err_file >> $log_file\n    samtools coverage !{params.samtools_coverage_options} !{aligned}    -o !{task.process}/!{sample}.cov.aligned.txt  2>> $err_file >> $log_file\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      coverage=$(cut -f 6 !{task.process}/!{sample}.cov.aligned.txt | tail -n 1)\n      depth=$(cut    -f 7 !{task.process}/!{sample}.cov.aligned.txt | tail -n 1)\n    else\n      samtools coverage !{params.samtools_coverage_options} !{trimmed} -m -o !{task.process}/!{sample}.cov.trimmed.hist 2>> $err_file >> $log_file\n      samtools coverage !{params.samtools_coverage_options} !{trimmed}    -o !{task.process}/!{sample}.cov.trimmed.txt  2>> $err_file >> $log_file\n      coverage=$(cut -f 6 !{task.process}/!{sample}.cov.trimmed.txt | tail -n 1)\n      depth=$(cut    -f 7 !{task.process}/!{sample}.cov.trimmed.txt | tail -n 1)\n    fi\n\n    if [ -z \"$coverage\" ] ; then coverage=\"0\" ; fi\n    if [ -z \"$depth\" ] ; then depth=\"0\" ; fi\n  '''",
        "nb_lignes_script": 24,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "pre_post_bams2"
        ],
        "nb_inputs": 1,
        "outputs": [
            "samtools_coverage_results",
            "samtools_covdepth_results"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "params.samtools_coverage",
        "stub": ""
    },
    "samtools_flagstat": {
        "name_process": "samtools_flagstat",
        "string_process": "\nprocess samtools_flagstat {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n\n  input:\n  tuple val(sample), file(aligned), file(trimmed) from pre_post_bams3\n\n  when:\n  params.samtools_flagstat\n\n  output:\n  file(\"${task.process}/${sample}.flagstat.{aligned,trimmed}.txt\") optional true\n  file(\"${task.process}/${sample}.flagstat.txt\") optional true into samtools_flagstat_files\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools flagstat !{params.samtools_flagstat_options} \\\n      !{aligned} \\\n      2>> $err_file | tee !{task.process}/!{sample}.flagstat.aligned.txt !{task.process}/!{sample}.flagstat.txt\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      echo \"No trimmed bam\"\n    else\n      samtools flagstat !{params.samtools_flagstat_options} \\\n        !{trimmed} \\\n        2>> $err_file | tee !{task.process}/!{sample}.flagstat.trimmed.txt !{task.process}/!{sample}.flagstat.txt\n    fi\n  '''\n}",
        "nb_lignes_process": 39,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools flagstat !{params.samtools_flagstat_options} \\\n      !{aligned} \\\n      2>> $err_file | tee !{task.process}/!{sample}.flagstat.aligned.txt !{task.process}/!{sample}.flagstat.txt\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      echo \"No trimmed bam\"\n    else\n      samtools flagstat !{params.samtools_flagstat_options} \\\n        !{trimmed} \\\n        2>> $err_file | tee !{task.process}/!{sample}.flagstat.trimmed.txt !{task.process}/!{sample}.flagstat.txt\n    fi\n  '''",
        "nb_lignes_script": 20,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "pre_post_bams3"
        ],
        "nb_inputs": 1,
        "outputs": [
            "samtools_flagstat_files"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "params.samtools_flagstat",
        "stub": ""
    },
    "samtools_depth": {
        "name_process": "samtools_depth",
        "string_process": "\nprocess samtools_depth {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n\n  input:\n  tuple val(sample), file(aligned), file(trimmed) from pre_post_bams4\n\n  when:\n  params.samtools_depth\n\n  output:\n  file(\"${task.process}/${sample}.depth.{aligned,trimmed}.txt\") optional true\n  tuple sample, env(depth) into samtools_depth_results\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools depth !{params.samtools_depth_options} \\\n      !{aligned} \\\n      2>> $err_file > !{task.process}/!{sample}.depth.aligned.txt\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      depth=$(awk '{ if ($3 > !{params.minimum_depth} ) print $0 }' !{task.process}/!{sample}.depth.aligned.txt | wc -l )\n    else\n      samtools depth !{params.samtools_depth_options} \\\n        !{trimmed} \\\n        2>> $err_file > !{task.process}/!{sample}.depth.trimmed.txt\n      depth=$(awk '{ if ($3 > !{params.minimum_depth} ) print $0 }' !{task.process}/!{sample}.depth.trimmed.txt | wc -l )\n    fi\n\n    if [ -z \"$depth\" ] ; then depth=\"0\" ; fi\n  '''\n}",
        "nb_lignes_process": 42,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools depth !{params.samtools_depth_options} \\\n      !{aligned} \\\n      2>> $err_file > !{task.process}/!{sample}.depth.aligned.txt\n\n    if [ \"!{trimmed}\" == \"null\" ] || [[ \"!{trimmed}\" == *\"input\"* ]]\n    then\n      depth=$(awk '{ if ($3 > !{params.minimum_depth} ) print $0 }' !{task.process}/!{sample}.depth.aligned.txt | wc -l )\n    else\n      samtools depth !{params.samtools_depth_options} \\\n        !{trimmed} \\\n        2>> $err_file > !{task.process}/!{sample}.depth.trimmed.txt\n      depth=$(awk '{ if ($3 > !{params.minimum_depth} ) print $0 }' !{task.process}/!{sample}.depth.trimmed.txt | wc -l )\n    fi\n\n    if [ -z \"$depth\" ] ; then depth=\"0\" ; fi\n  '''",
        "nb_lignes_script": 23,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "pre_post_bams4"
        ],
        "nb_inputs": 1,
        "outputs": [
            "samtools_depth_results"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "params.samtools_depth",
        "stub": ""
    },
    "kraken2": {
        "name_process": "kraken2",
        "string_process": "\nprocess kraken2 {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus params.maxcpus\n  container 'staphb/kraken2:latest'\n\n  when:\n  params.kraken2\n\n  input:\n  tuple val(sample), file(clean), val(paired_single), path(kraken2_db) from paired_files_kraken2.concat(single_files_kraken2).combine(kraken2_db)\n\n  output:\n  file(\"${task.process}/${sample}_kraken2_report.txt\") into kraken2_files\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n  tuple sample, env(percentage_cov) into kraken2_sars_results\n  tuple sample, env(percentage_human) into kraken2_human_results\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    kraken2 --version >> $log_file\n\n    if [ ! -d !{kraken2_db} ]\n    then\n      echo \"Kraken2 database could not be found. Please specify with params.kraken2_db\" | tee -a $err_file\n    fi\n\n    if [ \"!{paired_single}\" == \"single\" ]\n    then\n      kraken2 !{params.kraken2_options} \\\n        --classified-out cseqs#.fq \\\n        --threads !{task.cpus} \\\n        --db !{kraken2_db} \\\n        !{clean} \\\n        --report !{task.process}/!{sample}_kraken2_report.txt \\\n        2>> $err_file >> $log_file\n    else\n      kraken2 !{params.kraken2_options} \\\n        --paired \\\n        --classified-out cseqs#.fq \\\n        --threads !{task.cpus} \\\n        --db !{kraken2_db} \\\n        !{clean} \\\n        --report !{task.process}/!{sample}_kraken2_report.txt \\\n        2>> $err_file >> $log_file\n    fi\n\n    percentage_human=$(grep \"Homo sapiens\" !{task.process}/!{sample}_kraken2_report.txt | awk '{print $1}')\n    percentage_cov=$(grep \"!{params.kraken2_organism}\" !{task.process}/!{sample}_kraken2_report.txt | awk '{print $1}')\n\n    if [ -z \"$percentage_human\" ] ; then percentage_human=\"0\" ; fi\n    if [ -z \"$percentage_cov\" ] ; then percentage_cov=\"0\" ; fi\n  '''\n}",
        "nb_lignes_process": 58,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    kraken2 --version >> $log_file\n\n    if [ ! -d !{kraken2_db} ]\n    then\n      echo \"Kraken2 database could not be found. Please specify with params.kraken2_db\" | tee -a $err_file\n    fi\n\n    if [ \"!{paired_single}\" == \"single\" ]\n    then\n      kraken2 !{params.kraken2_options} \\\n        --classified-out cseqs#.fq \\\n        --threads !{task.cpus} \\\n        --db !{kraken2_db} \\\n        !{clean} \\\n        --report !{task.process}/!{sample}_kraken2_report.txt \\\n        2>> $err_file >> $log_file\n    else\n      kraken2 !{params.kraken2_options} \\\n        --paired \\\n        --classified-out cseqs#.fq \\\n        --threads !{task.cpus} \\\n        --db !{kraken2_db} \\\n        !{clean} \\\n        --report !{task.process}/!{sample}_kraken2_report.txt \\\n        2>> $err_file >> $log_file\n    fi\n\n    percentage_human=$(grep \"Homo sapiens\" !{task.process}/!{sample}_kraken2_report.txt | awk '{print $1}')\n    percentage_cov=$(grep \"!{params.kraken2_organism}\" !{task.process}/!{sample}_kraken2_report.txt | awk '{print $1}')\n\n    if [ -z \"$percentage_human\" ] ; then percentage_human=\"0\" ; fi\n    if [ -z \"$percentage_cov\" ] ; then percentage_cov=\"0\" ; fi\n  '''",
        "nb_lignes_script": 38,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "kraken2"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/kraken2"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "kraken2",
                "uri": "https://bio.tools/kraken2",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3174",
                            "term": "Metagenomics"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3460",
                                    "term": "Taxonomic classification"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3460",
                                    "term": "Taxonomy assignment"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_3494",
                                "term": "DNA sequence"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_3028",
                                "term": "Taxonomy"
                            }
                        ]
                    }
                ],
                "description": "Kraken 2 is the newest version of Kraken, a taxonomic classification system using exact k-mer matches to achieve high accuracy and fast classification speeds. This classifier matches each k-mer within a query sequence to the lowest common ancestor (LCA) of all genomes containing the given k-mer. The k-mer assignments inform the classification algorithm.",
                "homepage": "https://ccb.jhu.edu/software/kraken2/"
            }
        ],
        "inputs": [
            "paired_files_kraken2",
            "kraken2_db",
            "single_files_kraken2"
        ],
        "nb_inputs": 3,
        "outputs": [
            "kraken2_files",
            "kraken2_sars_results",
            "kraken2_human_results"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus params.maxcpus",
            "container 'staphb/kraken2:latest'"
        ],
        "when": "params.kraken2",
        "stub": ""
    },
    "bedtools_multicov": {
        "name_process": "bedtools_multicov",
        "string_process": "\nprocess bedtools_multicov {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/bedtools:latest'\n\n  when:\n  params.bedtools_multicov\n\n  input:\n  tuple val(sample), file(bam), file(bai), file(amplicon_bed) from bam_bai.combine(amplicon_bed)\n\n  output:\n  file(\"${task.process}/${sample}.multicov.txt\")\n  tuple sample, env(num_failed_amplicons) into bedtools_results\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    bedtools --version >> $log_file\n\n    bedtools multicov !{params.bedtools_multicov_options} \\\n      -bams !{bam} \\\n      -bed !{amplicon_bed} \\\n      2>> $err_file >> !{task.process}/!{sample}.multicov.txt\n\n    result_column=$(head -n 1 !{task.process}/!{sample}.multicov.txt | awk '{print NF}' )\n    num_failed_amplicons=$(cat !{task.process}/!{sample}.multicov.txt | tr ' ' '\\t' | cut -f $result_column | awk '{ if ( $1 < 20 ) print $0 }' | wc -l )\n    if [ -z \"$num_failed_amplicons\" ] ; then num_failed_amplicons=\"NA\" ; fi\n  '''\n}",
        "nb_lignes_process": 35,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    bedtools --version >> $log_file\n\n    bedtools multicov !{params.bedtools_multicov_options} \\\n      -bams !{bam} \\\n      -bed !{amplicon_bed} \\\n      2>> $err_file >> !{task.process}/!{sample}.multicov.txt\n\n    result_column=$(head -n 1 !{task.process}/!{sample}.multicov.txt | awk '{print NF}' )\n    num_failed_amplicons=$(cat !{task.process}/!{sample}.multicov.txt | tr ' ' '\\t' | cut -f $result_column | awk '{ if ( $1 < 20 ) print $0 }' | wc -l )\n    if [ -z \"$num_failed_amplicons\" ] ; then num_failed_amplicons=\"NA\" ; fi\n  '''",
        "nb_lignes_script": 16,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "BEDTools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/bedtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "BEDTools",
                "uri": "https://bio.tools/bedtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        }
                    ],
                    []
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2429",
                                    "term": "Mapping"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2429",
                                    "term": "Cartography"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "BEDTools is an extensive suite of utilities for comparing genomic features in BED format.",
                "homepage": "https://github.com/arq5x/bedtools2"
            }
        ],
        "inputs": [
            "bam_bai",
            "amplicon_bed"
        ],
        "nb_inputs": 2,
        "outputs": [
            "bedtools_results"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/bedtools:latest'"
        ],
        "when": "params.bedtools_multicov",
        "stub": ""
    },
    "samtools_ampliconstats": {
        "name_process": "samtools_ampliconstats",
        "string_process": "\nprocess samtools_ampliconstats {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n\n  when:\n  params.samtools_ampliconstats\n\n  input:\n  tuple val(sample), file(bam), file(primer_bed) from trimmed_bams5.combine(primer_bed_ampliconstats)\n\n  output:\n  tuple sample, file(\"${task.process}/${sample}_ampliconstats.txt\") into samtools_ampliconstats_files\n  tuple sample, env(num_failed_amplicons) into samtools_ampliconstats_results\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools ampliconstats !{params.samtools_ampliconstats_options} \\\n      !{primer_bed} \\\n      !{bam} \\\n      2>> $err_file > !{task.process}/!{sample}_ampliconstats.txt\n\n    num_failed_amplicons=$(grep ^FREADS !{task.process}/!{sample}_ampliconstats.txt | cut -f 2- | tr '\\t' '\\n' | awk '{ if ($1 < 20) print $0 }' | wc -l)\n    if [ -z \"$num_failed_amplicons\" ] ; then num_failed_amplicons=0 ; fi\n  '''\n}",
        "nb_lignes_process": 34,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    samtools ampliconstats !{params.samtools_ampliconstats_options} \\\n      !{primer_bed} \\\n      !{bam} \\\n      2>> $err_file > !{task.process}/!{sample}_ampliconstats.txt\n\n    num_failed_amplicons=$(grep ^FREADS !{task.process}/!{sample}_ampliconstats.txt | cut -f 2- | tr '\\t' '\\n' | awk '{ if ($1 < 20) print $0 }' | wc -l)\n    if [ -z \"$num_failed_amplicons\" ] ; then num_failed_amplicons=0 ; fi\n  '''",
        "nb_lignes_script": 15,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "trimmed_bams5",
            "primer_bed_ampliconstats"
        ],
        "nb_inputs": 2,
        "outputs": [
            "samtools_ampliconstats_files",
            "samtools_ampliconstats_results"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'"
        ],
        "when": "params.samtools_ampliconstats",
        "stub": ""
    },
    "samtools_plot_ampliconstats": {
        "name_process": "samtools_plot_ampliconstats",
        "string_process": "\nprocess samtools_plot_ampliconstats {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"${sample}\"\n  cpus 1\n  container 'staphb/samtools:latest'\n  errorStrategy 'ignore'\n\n  when:\n  params.samtools_plot_ampliconstats\n\n  input:\n  tuple val(sample), file(ampliconstats) from samtools_ampliconstats_files\n\n  output:\n  file(\"${task.process}/${sample}*\")\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process}/!{sample} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    plot-ampliconstats !{params.samtools_plot_ampliconstats_options} \\\n      !{task.process}/!{sample} \\\n      !{ampliconstats}\n  '''\n}",
        "nb_lignes_process": 30,
        "string_script": "  '''\n    mkdir -p !{task.process}/!{sample} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    samtools --version >> $log_file\n\n    plot-ampliconstats !{params.samtools_plot_ampliconstats_options} \\\n      !{task.process}/!{sample} \\\n      !{ampliconstats}\n  '''",
        "nb_lignes_script": 11,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "SAMtools"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/samtools"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "SAMtools",
                "uri": "https://bio.tools/samtools",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "Rare diseases"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0102",
                            "term": "Mapping"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3325",
                            "term": "https://en.wikipedia.org/wiki/Rare_disease"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_3096",
                                    "term": "Editing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Parsing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Indexing"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Data visualisation"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0337",
                                    "term": "Rendering"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Data loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_1812",
                                    "term": "Loading"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File format conversion"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "File formatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0335",
                                    "term": "Reformatting"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Data indexing"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_0227",
                                    "term": "Database indexing"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0924",
                                "term": "Sequence trace"
                            }
                        ]
                    }
                ],
                "description": "A software package with various utilities for processing alignments in the SAM format, including variant calling and alignment viewing.",
                "homepage": "http://www.htslib.org/"
            }
        ],
        "inputs": [
            "samtools_ampliconstats_files"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'staphb/samtools:latest'",
            "errorStrategy 'ignore'"
        ],
        "when": "params.samtools_plot_ampliconstats",
        "stub": ""
    },
    "pangolin": {
        "name_process": "pangolin",
        "string_process": "\nprocess pangolin {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"SARS-CoV-2 lineage Determination\"\n  cpus params.medcpus\n  container 'staphb/pangolin:latest'\n  stageInMode 'copy'\n\n  when:\n  params.pangolin\n\n  input:\n  file(fasta) from consensus_pangolin.concat(fastas_pangolin).concat(multifastas_pangolin).collect()\n\n  output:\n  file(\"${task.process}/*\")\n  file(\"${task.process}/lineage_report.csv\") into pangolin_file, pangolin_files\n  file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    pangolin --all-versions >> $log_file\n\n    for fasta in !{fasta}\n    do\n      cat $fasta >> ultimate_fasta.fasta\n    done\n\n    pangolin !{params.pangolin_options} \\\n      --threads !{task.cpus} \\\n      --outdir !{task.process} \\\n      ultimate_fasta.fasta \\\n      2>> $err_file >> $log_file\n    cp ultimate_fasta.fasta !{task.process}/combined.fasta\n  '''\n}",
        "nb_lignes_process": 39,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    pangolin --all-versions >> $log_file\n\n    for fasta in !{fasta}\n    do\n      cat $fasta >> ultimate_fasta.fasta\n    done\n\n    pangolin !{params.pangolin_options} \\\n      --threads !{task.cpus} \\\n      --outdir !{task.process} \\\n      ultimate_fasta.fasta \\\n      2>> $err_file >> $log_file\n    cp ultimate_fasta.fasta !{task.process}/combined.fasta\n  '''",
        "nb_lignes_script": 19,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "consensus_pangolin",
            "fastas_pangolin",
            "multifastas_pangolin"
        ],
        "nb_inputs": 3,
        "outputs": [
            "pangolin_file",
            "pangolin_files"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"SARS-CoV-2 lineage Determination\"",
            "cpus params.medcpus",
            "container 'staphb/pangolin:latest'",
            "stageInMode 'copy'"
        ],
        "when": "params.pangolin",
        "stub": ""
    },
    "nextclade": {
        "name_process": "nextclade",
        "string_process": "\nprocess nextclade {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"Clade Determination\"\n  cpus params.medcpus\n  container 'nextstrain/nextclade:latest'\n\n  when:\n  params.nextclade || params.msa == 'nextalign'\n\n  input:\n  file(fasta) from consensus_nextclade.concat(fastas_nextclade).concat(multifastas_nextclade).collect()\n\n  output:\n  file(\"${task.process}/nextclade.csv\") into nextclade_file\n  file(\"${task.process}/*\")\n  file(\"${task.process}/nextclade.aligned.fasta\") into nextclade_aligned_fasta\n  path(\"dataset\") into prepped_nextalign\n  file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} dataset logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    nextclade --version >> $log_file\n    nextclade_version=$(nextclade --version)\n\n    nextclade dataset get --name !{params.nextclade_dataset} --output-dir dataset\n\n    for fasta in !{fasta}\n    do\n      cat $fasta >> ultimate_fasta.fasta\n    done\n\n    nextclade !{params.nextclade_options} \\\n      --input-fasta=ultimate_fasta.fasta \\\n      --input-dataset dataset \\\n      --output-json=!{task.process}/nextclade.json \\\n      --output-csv=!{task.process}/nextclade.csv \\\n      --output-tsv=!{task.process}/nextclade.tsv \\\n      --output-tree=!{task.process}/nextclade.auspice.json \\\n      --output-dir=!{task.process} \\\n      --output-basename=nextclade \\\n      2>> $err_file >> $log_file\n    cp ultimate_fasta.fasta !{task.process}/combined.fasta\n  '''\n}",
        "nb_lignes_process": 48,
        "string_script": "  '''\n    mkdir -p !{task.process} dataset logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    nextclade --version >> $log_file\n    nextclade_version=$(nextclade --version)\n\n    nextclade dataset get --name !{params.nextclade_dataset} --output-dir dataset\n\n    for fasta in !{fasta}\n    do\n      cat $fasta >> ultimate_fasta.fasta\n    done\n\n    nextclade !{params.nextclade_options} \\\n      --input-fasta=ultimate_fasta.fasta \\\n      --input-dataset dataset \\\n      --output-json=!{task.process}/nextclade.json \\\n      --output-csv=!{task.process}/nextclade.csv \\\n      --output-tsv=!{task.process}/nextclade.tsv \\\n      --output-tree=!{task.process}/nextclade.auspice.json \\\n      --output-dir=!{task.process} \\\n      --output-basename=nextclade \\\n      2>> $err_file >> $log_file\n    cp ultimate_fasta.fasta !{task.process}/combined.fasta\n  '''",
        "nb_lignes_script": 27,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "consensus_nextclade",
            "fastas_nextclade",
            "multifastas_nextclade"
        ],
        "nb_inputs": 3,
        "outputs": [
            "nextclade_file",
            "nextclade_aligned_fasta",
            "prepped_nextalign"
        ],
        "nb_outputs": 3,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"Clade Determination\"",
            "cpus params.medcpus",
            "container 'nextstrain/nextclade:latest'"
        ],
        "when": "params.nextclade || params.msa == 'nextalign'",
        "stub": ""
    },
    "vadr": {
        "name_process": "vadr",
        "string_process": "\nprocess vadr {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"QC metrics\"\n  cpus params.medcpus\n  container 'staphb/vadr:latest'\n\n  when:\n  params.vadr\n\n  input:\n  file(fasta) from consensus_vadr.concat(fastas_vadr).concat(multifastas_vadr).collect()\n\n  output:\n  file(\"${task.process}/*\") optional true\n  file(\"${task.process}/vadr.vadr.sqa\") optional true into vadr_file\n  file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    echo \"no version\" >> $log_file\n    v-annotate.pl -h >> $log_file\n\n    for fasta in !{fasta}\n    do\n      cat $fasta >> ultimate_fasta.fasta\n    done\n\n    fasta-trim-terminal-ambigs.pl !{params.vadr_trim_options} \\\n      ultimate_fasta.fasta > trimmed_ultimate_fasta.fasta\n\n    if [ -s \"trimmed_ultimate_fasta.fasta\" ]\n    then\n      v-annotate.pl !{params.vadr_options} \\\n        --cpu !{task.cpus} \\\n        --noseqnamemax \\\n        --mkey !{params.vadr_reference} \\\n        --mdir !{params.vadr_mdir} \\\n        trimmed_ultimate_fasta.fasta \\\n        !{task.process} \\\n        2>> $err_file >> $log_file\n    fi\n    cp ultimate_fasta.fasta !{task.process}/combined.fasta\n    cp trimmed_ultimate_fasta.fasta !{task.process}/trimmed.fasta\n  '''\n}",
        "nb_lignes_process": 49,
        "string_script": "  '''\n    mkdir -p logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n    echo \"no version\" >> $log_file\n    v-annotate.pl -h >> $log_file\n\n    for fasta in !{fasta}\n    do\n      cat $fasta >> ultimate_fasta.fasta\n    done\n\n    fasta-trim-terminal-ambigs.pl !{params.vadr_trim_options} \\\n      ultimate_fasta.fasta > trimmed_ultimate_fasta.fasta\n\n    if [ -s \"trimmed_ultimate_fasta.fasta\" ]\n    then\n      v-annotate.pl !{params.vadr_options} \\\n        --cpu !{task.cpus} \\\n        --noseqnamemax \\\n        --mkey !{params.vadr_reference} \\\n        --mdir !{params.vadr_mdir} \\\n        trimmed_ultimate_fasta.fasta \\\n        !{task.process} \\\n        2>> $err_file >> $log_file\n    fi\n    cp ultimate_fasta.fasta !{task.process}/combined.fasta\n    cp trimmed_ultimate_fasta.fasta !{task.process}/trimmed.fasta\n  '''",
        "nb_lignes_script": 30,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "consensus_vadr",
            "fastas_vadr",
            "multifastas_vadr"
        ],
        "nb_inputs": 3,
        "outputs": [
            "vadr_file"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"QC metrics\"",
            "cpus params.medcpus",
            "container 'staphb/vadr:latest'"
        ],
        "when": "params.vadr",
        "stub": ""
    },
    "freyja": {
        "name_process": "freyja",
        "string_process": " process freyja {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"${sample}\"\n    cpus params.medcpus\n    container 'staphb/freyja:latest'\n    errorStrategy 'ignore'\n\n    input:\n    tuple val(sample), file(bam), file(reference_genome) from trimmed_bams_freyja\n\n    output:\n    file(\"${task.process}/${sample}_demix.tsv\") into freyja_demix\n    file(\"${task.process}/${sample}*\")\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{err,log}\")\n\n    shell:\n    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n      # no version for 1.3.4\n\n      freyja variants !{params.freyja_variants_options} \\\n        !{bam} \\\n        --variants !{task.process}/!{sample}_variants.tsv \\\n        --depths !{task.process}/!{sample}_depths.tsv \\\n        --ref !{reference_genome} \\\n        2>> $err_file >> $log_file\n\n      # freyja update 2>> $err_file >> $log_file\n\n      freyja demix \\\n        !{params.freyja_demix_options} \\\n        !{task.process}/!{sample}_variants.tsv \\\n        !{task.process}/!{sample}_depths.tsv \\\n        --output !{task.process}/!{sample}_demix.tsv \\\n        2>> $err_file >> $log_file\n\n      freyja boot \\\n        !{task.process}/!{sample}_variants.tsv \\\n        !{task.process}/!{sample}_depths.tsv \\\n        --nt !{task.cpus} \\\n        --output_base !{task.process}/!{sample}_boot.tsv \\\n        2>> $err_file >> $log_file\n    '''\n  }",
        "nb_lignes_process": 46,
        "string_script": "    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n      # no version for 1.3.4\n\n      freyja variants !{params.freyja_variants_options} \\\n        !{bam} \\\n        --variants !{task.process}/!{sample}_variants.tsv \\\n        --depths !{task.process}/!{sample}_depths.tsv \\\n        --ref !{reference_genome} \\\n        2>> $err_file >> $log_file\n\n      # freyja update 2>> $err_file >> $log_file\n\n      freyja demix \\\n        !{params.freyja_demix_options} \\\n        !{task.process}/!{sample}_variants.tsv \\\n        !{task.process}/!{sample}_depths.tsv \\\n        --output !{task.process}/!{sample}_demix.tsv \\\n        2>> $err_file >> $log_file\n\n      freyja boot \\\n        !{task.process}/!{sample}_variants.tsv \\\n        !{task.process}/!{sample}_depths.tsv \\\n        --nt !{task.cpus} \\\n        --output_base !{task.process}/!{sample}_boot.tsv \\\n        2>> $err_file >> $log_file\n    '''",
        "nb_lignes_script": 30,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "trimmed_bams_freyja"
        ],
        "nb_inputs": 1,
        "outputs": [
            "freyja_demix"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"${sample}\"",
            "cpus params.medcpus",
            "container 'staphb/freyja:latest'",
            "errorStrategy 'ignore'"
        ],
        "when": "",
        "stub": ""
    },
    "freyja_aggregate": {
        "name_process": "freyja_aggregate",
        "string_process": " process freyja_aggregate {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"Aggregating results from freyja\"\n    cpus 1\n    container 'staphb/freyja:latest'\n\n    input:\n    file(demix) from freyja_demix.collect()\n\n    output:\n    file(\"freyja/aggregated*\")\n    file(\"freyja/aggregated-freyja.tsv\") into aggregated_freyja_file\n    file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{err,log}\")\n\n    shell:\n    '''\n      mkdir -p freyja logs/!{task.process} tmp\n      log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n\n      mv !{demix} tmp/.\n\n      freyja aggregate !{params.freyja_aggregate_options} \\\n        tmp/ \\\n        --output freyja/aggregated-freyja.tsv \\\n        2>> $err_file >> $log_file\n\n      freyja plot !{params.freyja_plot_options} \\\n        freyja/aggregated-freyja.tsv \\\n        --output freyja/aggregated-freyja.!{params.freyja_plot_filetype} \\\n        2>> $err_file >> $log_file\n    '''\n  }",
        "nb_lignes_process": 33,
        "string_script": "    '''\n      mkdir -p freyja logs/!{task.process} tmp\n      log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n\n      mv !{demix} tmp/.\n\n      freyja aggregate !{params.freyja_aggregate_options} \\\n        tmp/ \\\n        --output freyja/aggregated-freyja.tsv \\\n        2>> $err_file >> $log_file\n\n      freyja plot !{params.freyja_plot_options} \\\n        freyja/aggregated-freyja.tsv \\\n        --output freyja/aggregated-freyja.!{params.freyja_plot_filetype} \\\n        2>> $err_file >> $log_file\n    '''",
        "nb_lignes_script": 18,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "TMPD"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/tmpd"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "TMPD",
                "uri": "https://bio.tools/tmpd",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0780",
                            "term": "Plant biology"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0622",
                            "term": "Genomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0160",
                            "term": "Sequence sites, features and motifs"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0780",
                            "term": "Plant science"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0780",
                            "term": "Plants"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0780",
                            "term": "Botany"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0780",
                            "term": "Plant"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2422",
                                    "term": "Data retrieval"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2422",
                                    "term": "Data extraction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_2422",
                                    "term": "Retrieval"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "The Tobacco Markers & Primers Database.",
                "homepage": "http://biodb.sdau.edu.cn/tmpd/index.html"
            }
        ],
        "inputs": [
            "freyja_demix"
        ],
        "nb_inputs": 1,
        "outputs": [
            "aggregated_freyja_file"
        ],
        "nb_outputs": 1,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"Aggregating results from freyja\"",
            "cpus 1",
            "container 'staphb/freyja:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "summary": {
        "name_process": "summary",
        "string_process": "\nprocess summary {\n  publishDir \"${params.outdir}\", mode: 'copy', overwrite: true\n  tag \"${sample}\"\n  cpus 1\n  container 'quay.io/biocontainers/pandas:1.1.5'\n\n  input:\n  tuple val(sample), val(num_N), val(num_ACTG), val(num_degenerate), val(num_total), val(first_line),\n    val(raw_1),\n    val(raw_2),\n    val(pairskept),\n    val(perc_kept),\n    val(reads_passed),\n    val(ivar_variants),\n    val(bcftools_variants),\n    val(coverage),\n    val(covdepth),\n    val(depth),\n    val(samtools_stats_before_size_results),\n    val(samtools_stats_after_size_results),\n    val(percentage_human),\n    val(percentage_cov),\n    val(bedtools_num_failed_amplicons),\n    val(samtools_num_failed_amplicons),\n    val(aligner_version),\n    val(trimmer_version),\n    val(cleaner_version),\n    val(ivar_version) from results\n\n  output:\n  file(\"${task.process}/${sample}.summary.csv\") into summary_file, summary\n  file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n\n    sample_id=($(echo !{sample} | cut -f 1 -d \"_\" ))\n\n    header=\"sample_id,sample,fasta_line\"\n    result=\"${sample_id},!{sample},!{first_line}\"\n\n    if [ \"!{params.fastqc}\" != \"false\" ]\n    then\n      header=\"$header,fastqc_raw_reads_1,fastqc_raw_reads_2\"\n      result=\"$result,!{raw_1},!{raw_2}\"\n    fi\n\n    if [ \"!{params.cleaner}\" == \"seqyclean\" ]\n    then\n      header=\"$header,seqyclean_pairs_kept_after_cleaning,seqyclean_percent_kept_after_cleaning\"\n      result=\"$result,!{pairskept},!{perc_kept}\"\n    fi\n\n    if [ \"!{params.cleaner}\" == \"fastp\" ]\n    then\n      header=\"$header,fastp_reads_passed\"\n      result=\"$result,!{reads_passed}\"\n    fi\n\n    if [ \"!{params.samtools_coverage}\" != \"false\" ]\n    then\n      header=\"$header,depth_after_trimming,1X_coverage_after_trimming\"\n      result=\"$result,!{covdepth},!{coverage}\"\n    fi\n\n    if [ \"!{params.samtools_depth}\" != \"false\" ]\n    then\n      header=\"$header,num_pos_!{params.minimum_depth}X\"\n      result=\"$result,!{depth}\"\n    fi\n\n    if [ \"!{params.samtools_stats}\" != \"false\" ]\n    then\n      header=\"$header,insert_size_before_trimming,insert_size_after_trimming\"\n      result=\"$result,!{samtools_stats_before_size_results},!{samtools_stats_after_size_results}\"\n    fi\n\n    if [ \"!{params.kraken2}\" != \"false\" ]\n    then\n      organism=$(echo \"!{params.kraken2_organism}\" | sed 's/ /_/g')\n      header=\"$header,%_human_reads,percent_${organism}_reads\"\n      result=\"$result,!{percentage_human},!{percentage_cov}\"\n    fi\n\n    if [ \"!{params.ivar_variants}\" != \"false\" ]\n    then\n      header=\"$header,ivar_num_variants_identified\"\n      result=\"$result,!{ivar_variants}\"\n    fi\n\n    if [ \"!{params.bcftools_variants}\" != \"false\" ]\n    then\n      header=\"$header,bcftools_variants_identified\"\n      result=\"$result,!{bcftools_variants}\"\n    fi\n\n    if [ \"!{params.bedtools_multicov}\" != \"false\" ]\n    then\n      header=\"$header,bedtools_num_failed_amplicons\"\n      result=\"$result,!{bedtools_num_failed_amplicons}\"\n    fi\n\n    if [ \"!{params.samtools_ampliconstats}\" != \"false\" ]\n    then\n      header=\"$header,samtools_num_failed_amplicons\"\n      result=\"$result,!{samtools_num_failed_amplicons}\"\n    fi\n\n    header=\"$header,num_N,num_degenerage,num_non-ambiguous,num_total\"\n    result=\"$result,!{num_N},!{num_degenerate},!{num_ACTG},!{num_total}\"\n\n    header=\"$header,cleaner_version,aligner_version,trimmer_version,ivar_version\"\n    result=\"$result,!{cleaner_version},!{aligner_version},!{trimmer_version},!{ivar_version}\"\n\n    echo $header > !{task.process}/!{sample}.summary.csv\n    echo $result >> !{task.process}/!{sample}.summary.csv\n  '''\n}",
        "nb_lignes_process": 122,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n\n    sample_id=($(echo !{sample} | cut -f 1 -d \"_\" ))\n\n    header=\"sample_id,sample,fasta_line\"\n    result=\"${sample_id},!{sample},!{first_line}\"\n\n    if [ \"!{params.fastqc}\" != \"false\" ]\n    then\n      header=\"$header,fastqc_raw_reads_1,fastqc_raw_reads_2\"\n      result=\"$result,!{raw_1},!{raw_2}\"\n    fi\n\n    if [ \"!{params.cleaner}\" == \"seqyclean\" ]\n    then\n      header=\"$header,seqyclean_pairs_kept_after_cleaning,seqyclean_percent_kept_after_cleaning\"\n      result=\"$result,!{pairskept},!{perc_kept}\"\n    fi\n\n    if [ \"!{params.cleaner}\" == \"fastp\" ]\n    then\n      header=\"$header,fastp_reads_passed\"\n      result=\"$result,!{reads_passed}\"\n    fi\n\n    if [ \"!{params.samtools_coverage}\" != \"false\" ]\n    then\n      header=\"$header,depth_after_trimming,1X_coverage_after_trimming\"\n      result=\"$result,!{covdepth},!{coverage}\"\n    fi\n\n    if [ \"!{params.samtools_depth}\" != \"false\" ]\n    then\n      header=\"$header,num_pos_!{params.minimum_depth}X\"\n      result=\"$result,!{depth}\"\n    fi\n\n    if [ \"!{params.samtools_stats}\" != \"false\" ]\n    then\n      header=\"$header,insert_size_before_trimming,insert_size_after_trimming\"\n      result=\"$result,!{samtools_stats_before_size_results},!{samtools_stats_after_size_results}\"\n    fi\n\n    if [ \"!{params.kraken2}\" != \"false\" ]\n    then\n      organism=$(echo \"!{params.kraken2_organism}\" | sed 's/ /_/g')\n      header=\"$header,%_human_reads,percent_${organism}_reads\"\n      result=\"$result,!{percentage_human},!{percentage_cov}\"\n    fi\n\n    if [ \"!{params.ivar_variants}\" != \"false\" ]\n    then\n      header=\"$header,ivar_num_variants_identified\"\n      result=\"$result,!{ivar_variants}\"\n    fi\n\n    if [ \"!{params.bcftools_variants}\" != \"false\" ]\n    then\n      header=\"$header,bcftools_variants_identified\"\n      result=\"$result,!{bcftools_variants}\"\n    fi\n\n    if [ \"!{params.bedtools_multicov}\" != \"false\" ]\n    then\n      header=\"$header,bedtools_num_failed_amplicons\"\n      result=\"$result,!{bedtools_num_failed_amplicons}\"\n    fi\n\n    if [ \"!{params.samtools_ampliconstats}\" != \"false\" ]\n    then\n      header=\"$header,samtools_num_failed_amplicons\"\n      result=\"$result,!{samtools_num_failed_amplicons}\"\n    fi\n\n    header=\"$header,num_N,num_degenerage,num_non-ambiguous,num_total\"\n    result=\"$result,!{num_N},!{num_degenerate},!{num_ACTG},!{num_total}\"\n\n    header=\"$header,cleaner_version,aligner_version,trimmer_version,ivar_version\"\n    result=\"$result,!{cleaner_version},!{aligner_version},!{trimmer_version},!{ivar_version}\"\n\n    echo $header > !{task.process}/!{sample}.summary.csv\n    echo $result >> !{task.process}/!{sample}.summary.csv\n  '''",
        "nb_lignes_script": 87,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "results"
        ],
        "nb_inputs": 1,
        "outputs": [
            "summary_file",
            "summary"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy', overwrite: true",
            "tag \"${sample}\"",
            "cpus 1",
            "container 'quay.io/biocontainers/pandas:1.1.5'"
        ],
        "when": "",
        "stub": ""
    },
    "combine_results": {
        "name_process": "combine_results",
        "string_process": "\nprocess combine_results {\n  publishDir \"${params.outdir}\", mode: 'copy', overwrite: true\n  tag \"Combining Results\"\n  cpus 1\n  container 'quay.io/biocontainers/pandas:1.1.5'\n\n  when:\n  params.nextclade || params.pangolin || params.vadr\n\n  input:\n  file(nextclade) from nextclade_file.ifEmpty([])\n  file(pangolin) from pangolin_file.ifEmpty([])\n  file(vadr) from vadr_file.ifEmpty([])\n  file(freyja) from aggregated_freyja_file.ifEmpty([])\n  file(summary) from summary_file.collect()\n  file(combine_results) from combine_results_script\n\n  output:\n  file(\"cecret_results.{csv,txt}\")\n  file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p summary logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n\n    cat !{summary} | head -n 1 > combined_summary.csv\n    for summary in !{summary}\n    do\n      tail -n +2 $summary >> combined_summary.csv\n    done\n\n    if [ -s \"vadr.vadr.sqa\" ] ; then tail -n +2 \"vadr.vadr.sqa\" | grep -v \"#-\" | tr -s '[:blank:]' ',' > vadr.csv ; fi\n\n    python !{combine_results}\n    cat cecret_results.csv | tr ',' '\\\\t' > cecret_results.txt\n  '''\n}",
        "nb_lignes_process": 40,
        "string_script": "  '''\n    mkdir -p summary logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    date | tee -a $log_file $err_file > /dev/null\n\n    cat !{summary} | head -n 1 > combined_summary.csv\n    for summary in !{summary}\n    do\n      tail -n +2 $summary >> combined_summary.csv\n    done\n\n    if [ -s \"vadr.vadr.sqa\" ] ; then tail -n +2 \"vadr.vadr.sqa\" | grep -v \"#-\" | tr -s '[:blank:]' ',' > vadr.csv ; fi\n\n    python !{combine_results}\n    cat cecret_results.csv | tr ',' '\\\\t' > cecret_results.txt\n  '''",
        "nb_lignes_script": 17,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "nextclade_file",
            "pangolin_file",
            "vadr_file",
            "aggregated_freyja_file",
            "summary_file",
            "combine_results_script"
        ],
        "nb_inputs": 6,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy', overwrite: true",
            "tag \"Combining Results\"",
            "cpus 1",
            "container 'quay.io/biocontainers/pandas:1.1.5'"
        ],
        "when": "params.nextclade || params.pangolin || params.vadr",
        "stub": ""
    },
    "mafft": {
        "name_process": "mafft",
        "string_process": " process mafft {\n      publishDir \"${params.outdir}\", mode: 'copy'\n      tag \"Multiple Sequence Alignment\"\n      cpus params.maxcpus\n      container 'staphb/mafft:latest'\n      errorStrategy 'retry'\n      maxRetries 2\n\n      input:\n      file(consensus) from consensus_msa.concat(fastas_msa).concat(multifastas_msa).collect()\n      file(reference_genome) from reference_genome_msa\n\n      output:\n      file(\"${task.process}/mafft_aligned.fasta\") into msa_file, msa_file2\n      file(\"logs/${task.process}/mafft.${workflow.sessionId}.{log,err}\")\n\n      shell:\n      '''\n        mkdir -p !{task.process} logs/!{task.process}\n        log_file=logs/!{task.process}/mafft.!{workflow.sessionId}.log\n        err_file=logs/!{task.process}/mafft.!{workflow.sessionId}.err\n\n        date | tee -a $log_file $err_file > /dev/null\n        echo \"mafft version:\" >> $log_file\n        mafft --version 2>&1 >> $log_file\n\n        for fasta in !{consensus}\n        do\n          cat $fasta >> !{task.process}/ultimate.fasta\n        done\n\n        mafft --auto \\\n          !{params.mafft_options} \\\n          --thread !{task.cpus} \\\n          --addfragments !{task.process}/ultimate.fasta \\\n          !{reference_genome} \\\n          > !{task.process}/mafft_aligned.fasta \\\n          2>> $err_file\n      '''\n    }",
        "nb_lignes_process": 38,
        "string_script": "      '''\n        mkdir -p !{task.process} logs/!{task.process}\n        log_file=logs/!{task.process}/mafft.!{workflow.sessionId}.log\n        err_file=logs/!{task.process}/mafft.!{workflow.sessionId}.err\n\n        date | tee -a $log_file $err_file > /dev/null\n        echo \"mafft version:\" >> $log_file\n        mafft --version 2>&1 >> $log_file\n\n        for fasta in !{consensus}\n        do\n          cat $fasta >> !{task.process}/ultimate.fasta\n        done\n\n        mafft --auto \\\n          !{params.mafft_options} \\\n          --thread !{task.cpus} \\\n          --addfragments !{task.process}/ultimate.fasta \\\n          !{reference_genome} \\\n          > !{task.process}/mafft_aligned.fasta \\\n          2>> $err_file\n      '''",
        "nb_lignes_script": 21,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "MAFFT"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/MAFFT"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "MAFFT",
                "uri": "https://bio.tools/MAFFT",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequence analysis"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_0080",
                            "term": "Sequences"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0492",
                                    "term": "Multiple sequence alignment"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0492",
                                    "term": "Multiple alignment"
                                }
                            ]
                        ],
                        "input": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            }
                        ],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_0863",
                                "term": "Sequence alignment"
                            }
                        ]
                    }
                ],
                "description": "MAFFT (Multiple Alignment using Fast Fourier Transform) is a high speed multiple sequence alignment program.",
                "homepage": "http://mafft.cbrc.jp/alignment/server/index.html"
            }
        ],
        "inputs": [
            "consensus_msa",
            "fastas_msa",
            "multifastas_msa",
            "reference_genome_msa"
        ],
        "nb_inputs": 4,
        "outputs": [
            "msa_file",
            "msa_file2"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"Multiple Sequence Alignment\"",
            "cpus params.maxcpus",
            "container 'staphb/mafft:latest'",
            "errorStrategy 'retry'",
            "maxRetries 2"
        ],
        "when": "",
        "stub": ""
    },
    "nextalign": {
        "name_process": "nextalign",
        "string_process": " process nextalign {\n      publishDir \"${params.outdir}\", mode: 'copy'\n      tag \"Multiple Sequence Alignment\"\n      cpus params.maxcpus\n      container 'nextstrain/nextalign:latest'\n\n      input:\n      file(consensus) from consensus_msa.concat(fastas_msa).concat(multifastas_msa).collect()\n      path(dataset) from prepped_nextalign\n\n      output:\n      file(\"${task.process}/nextalign.aligned.fasta\") into msa_file, msa_file2\n      file(\"${task.process}/{*.fasta,nextalign.*.csv}\")\n      file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n      shell:\n      '''\n        mkdir -p !{task.process} logs/!{task.process}\n        log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n        err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n        date | tee -a $log_file $err_file > /dev/null\n        echo \"nextalign version:\" >> $log_file\n        nextalign --version-detailed 2>&1 >> $log_file\n\n        for fasta in !{consensus}\n        do\n          cat $fasta >> !{task.process}/ultimate.fasta\n        done\n\n        nextalign !{params.nextalign_options} \\\n          --sequences !{task.process}/ultimate.fasta \\\n          --reference !{dataset}/reference.fasta \\\n          --genemap !{dataset}/genemap.gff \\\n          --jobs !{task.cpus} \\\n          --output-dir !{task.process} \\\n          --output-basename nextalign \\\n          >> $log_file 2>> $err_file\n      '''\n    }",
        "nb_lignes_process": 38,
        "string_script": "      '''\n        mkdir -p !{task.process} logs/!{task.process}\n        log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n        err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n        date | tee -a $log_file $err_file > /dev/null\n        echo \"nextalign version:\" >> $log_file\n        nextalign --version-detailed 2>&1 >> $log_file\n\n        for fasta in !{consensus}\n        do\n          cat $fasta >> !{task.process}/ultimate.fasta\n        done\n\n        nextalign !{params.nextalign_options} \\\n          --sequences !{task.process}/ultimate.fasta \\\n          --reference !{dataset}/reference.fasta \\\n          --genemap !{dataset}/genemap.gff \\\n          --jobs !{task.cpus} \\\n          --output-dir !{task.process} \\\n          --output-basename nextalign \\\n          >> $log_file 2>> $err_file\n      '''",
        "nb_lignes_script": 22,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "consensus_msa",
            "fastas_msa",
            "multifastas_msa",
            "prepped_nextalign"
        ],
        "nb_inputs": 4,
        "outputs": [
            "msa_file",
            "msa_file2"
        ],
        "nb_outputs": 2,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"Multiple Sequence Alignment\"",
            "cpus params.maxcpus",
            "container 'nextstrain/nextalign:latest'"
        ],
        "when": "",
        "stub": ""
    },
    "snpdists": {
        "name_process": "snpdists",
        "string_process": " process snpdists {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"createing snp matrix with snp-dists\"\n    cpus 1\n    container 'staphb/snp-dists:latest'\n\n    when:\n    params.snpdists\n\n    input:\n    file(msa) from msa_file\n\n    output:\n    file(\"snp-dists/snp-dists.txt\")\n    file(\"logs/${task.process}/snp-dists.${workflow.sessionId}.{log,err}\")\n\n    shell:\n    '''\n      mkdir -p snp-dists logs/!{task.process}\n      log_file=logs/!{task.process}/snp-dists.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/snp-dists.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n      snp-dists -v >> $log_file\n\n      snp-dists !{params.snpdists_options} !{msa} > snp-dists/snp-dists.txt 2> $err_file\n    '''\n  }",
        "nb_lignes_process": 26,
        "string_script": "    '''\n      mkdir -p snp-dists logs/!{task.process}\n      log_file=logs/!{task.process}/snp-dists.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/snp-dists.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n      snp-dists -v >> $log_file\n\n      snp-dists !{params.snpdists_options} !{msa} > snp-dists/snp-dists.txt 2> $err_file\n    '''",
        "nb_lignes_script": 9,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "msa_file"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"createing snp matrix with snp-dists\"",
            "cpus 1",
            "container 'staphb/snp-dists:latest'"
        ],
        "when": "params.snpdists",
        "stub": ""
    },
    "iqtree2": {
        "name_process": "iqtree2",
        "string_process": " process iqtree2 {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"Creating phylogenetic tree with iqtree\"\n    cpus params.maxcpus\n    container 'staphb/iqtree2:latest'\n\n    when:\n    params.iqtree2\n\n    input:\n    file(msa) from msa_file2\n\n    output:\n    file(\"${task.process}/${task.process}.{iqtree,treefile,mldist,log}\")\n    file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n    shell:\n    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n      iqtree2 --version >> $log_file\n\n      if [ -n \"!{params.iqtree2_outgroup}\" ] && [ \"!{params.iqtree2_outgroup}\" != \"null\" ] && [ \"!{params.msa}\" != \"nextclade\" ]\n      then\n        outgroup=\"-o !{params.iqtree2_outgroup}\"\n        cat !{msa} | sed 's/!{params.iqtree2_outgroup}.*/!{params.iqtree2_outgroup}/g' > !{msa}.renamed\n      else\n        outgroup=\"\"\n        mv !{msa} !{msa}.renamed\n      fi\n\n      # creating a tree\n    \tiqtree2 !{params.iqtree2_options} \\\n        -nt AUTO \\\n        -ntmax !{task.cpus} \\\n        -s !{msa}.renamed \\\n        -pre !{task.process}/iqtree2 \\\n        $outgroup \\\n        >> $log_file 2>> $err_file\n    '''\n  }",
        "nb_lignes_process": 42,
        "string_script": "    '''\n      mkdir -p !{task.process} logs/!{task.process}\n      log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n      iqtree2 --version >> $log_file\n\n      if [ -n \"!{params.iqtree2_outgroup}\" ] && [ \"!{params.iqtree2_outgroup}\" != \"null\" ] && [ \"!{params.msa}\" != \"nextclade\" ]\n      then\n        outgroup=\"-o !{params.iqtree2_outgroup}\"\n        cat !{msa} | sed 's/!{params.iqtree2_outgroup}.*/!{params.iqtree2_outgroup}/g' > !{msa}.renamed\n      else\n        outgroup=\"\"\n        mv !{msa} !{msa}.renamed\n      fi\n\n      # creating a tree\n    \tiqtree2 !{params.iqtree2_options} \\\n        -nt AUTO \\\n        -ntmax !{task.cpus} \\\n        -s !{msa}.renamed \\\n        -pre !{task.process}/iqtree2 \\\n        $outgroup \\\n        >> $log_file 2>> $err_file\n    '''",
        "nb_lignes_script": 25,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "msa_file2"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"Creating phylogenetic tree with iqtree\"",
            "cpus params.maxcpus",
            "container 'staphb/iqtree2:latest'"
        ],
        "when": "params.iqtree2",
        "stub": ""
    },
    "rename": {
        "name_process": "rename",
        "string_process": " process rename {\n    publishDir \"${params.outdir}\", mode: 'copy'\n    tag \"Renaming files for ${sample}\"\n    cpus 1\n    container 'staphb/parallel-perl:latest'\n    stageInMode 'copy'\n\n    input:\n    tuple val(sample), file(reads), val(paired_single), file(consensus), file(filtered_reads), file(sample_file) from rename\n\n    output:\n    file(\"submission_files/*{genbank,gisaid}.fa\") optional true\n    file(\"submission_files/*.fastq.gz\")\n    file(\"logs/${task.process}/${sample}.${workflow.sessionId}.{err,log}\")\n\n    shell:\n    '''\n      mkdir -p submission_files logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n\n      !{workflow.projectDir}/bin/genbank_submission.sh \\\n        -f !{sample_file} \\\n        -c . \\\n        -d . \\\n        -s !{params.gisaid_threshold} \\\n        -g !{params.genbank_threshold} \\\n        -o submission_files \\\n        2>> $err_file >> $log_file\n    '''\n  }",
        "nb_lignes_process": 31,
        "string_script": "    '''\n      mkdir -p submission_files logs/!{task.process}\n      log_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.log\n      err_file=logs/!{task.process}/!{sample}.!{workflow.sessionId}.err\n\n      date | tee -a $log_file $err_file > /dev/null\n\n      !{workflow.projectDir}/bin/genbank_submission.sh \\\n        -f !{sample_file} \\\n        -c . \\\n        -d . \\\n        -s !{params.gisaid_threshold} \\\n        -g !{params.genbank_threshold} \\\n        -o submission_files \\\n        2>> $err_file >> $log_file\n    '''",
        "nb_lignes_script": 15,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            }
        ],
        "inputs": [
            "rename"
        ],
        "nb_inputs": 1,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"Renaming files for ${sample}\"",
            "cpus 1",
            "container 'staphb/parallel-perl:latest'",
            "stageInMode 'copy'"
        ],
        "when": "",
        "stub": ""
    },
    "multiqc": {
        "name_process": "multiqc",
        "string_process": "\nprocess multiqc {\n  publishDir \"${params.outdir}\", mode: 'copy'\n  tag \"multiqc\"\n  cpus 1\n  container 'ewels/multiqc:latest'\n\n  when:\n  params.multiqc\n\n  input:\n  file(fastqc) from fastqc_files.collect().ifEmpty([])\n  file(fastp) from fastp_files.collect().ifEmpty([])\n  file(seqyclean) from seqyclean_files.collect().ifEmpty([])\n  file(kraken2) from kraken2_files.collect().ifEmpty([])\n  file(pangolin) from pangolin_files.collect().ifEmpty([])\n  file(ivar) from ivar_trim_files.collect().ifEmpty([])\n  file(samtools_stats) from samtools_stats_files.collect().ifEmpty([])\n  file(samtools_flagstat) from samtools_flagstat_files.collect().ifEmpty([])\n\n  output:\n  file(\"${task.process}/multiqc_report.html\") optional true\n  file(\"${task.process}/multiqc_data/*\") optional true\n  file(\"logs/${task.process}/${task.process}.${workflow.sessionId}.{log,err}\")\n\n  shell:\n  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    multiqc --version >> $log_file\n\n    multiqc !{params.multiqc_options} \\\n      --outdir !{task.process} \\\n      . \\\n      2>> $err_file >> $log_file\n  '''\n}",
        "nb_lignes_process": 39,
        "string_script": "  '''\n    mkdir -p !{task.process} logs/!{task.process}\n    log_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.log\n    err_file=logs/!{task.process}/!{task.process}.!{workflow.sessionId}.err\n\n    # time stamp + capturing tool versions\n    date | tee -a $log_file $err_file > /dev/null\n    multiqc --version >> $log_file\n\n    multiqc !{params.multiqc_options} \\\n      --outdir !{task.process} \\\n      . \\\n      2>> $err_file >> $log_file\n  '''",
        "nb_lignes_script": 13,
        "language_script": "bash",
        "tools": [
            "datelife",
            "NullSeq",
            "MultiQC"
        ],
        "tools_url": [
            "https://bio.tools/datelife",
            "https://bio.tools/nullseq",
            "https://bio.tools/multiqc"
        ],
        "tools_dico": [
            {
                "name": "datelife",
                "uri": "https://bio.tools/datelife",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_0084",
                            "term": "Phylogeny"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature and language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0194",
                            "term": "Phylogenomics"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0637",
                            "term": "Taxonomy"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Language"
                        },
                        {
                            "uri": "http://edamontology.org/topic_3068",
                            "term": "Literature"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Query and retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Imputation"
                                }
                            ],
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0224",
                                    "term": "Database retrieval"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3478",
                                    "term": "Phylogenetic tree reconstruction"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Database submission"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3431",
                                    "term": "Data deposition"
                                },
                                {
                                    "uri": "http://edamontology.org/operation_3557",
                                    "term": "Data imputation"
                                }
                            ]
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Leveraging databases and analytical tools to reveal the dated Tree of Life.\n\nR package containing datelife's core functionality.\n\nDashboard \u22c5 phylotastic/datelife.\n\nGet a phylogenetic tree with branch lengths proportional to geologic time (aka a chronogram) of any two or more lineages of interest to you: use this R package or go to www.datelife.org to make a query of chronograms available for your lineages in the Open Tree of Life\u2019s tree store.\n\nWelcome to the DateLife project.\n\nAn R package, datelife for doing the calculations.\n\nCode coverage done right",
                "homepage": "http://www.datelife.org/"
            },
            {
                "name": "NullSeq",
                "uri": "https://bio.tools/nullseq",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_0364",
                                    "term": "Random sequence generation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": []
                    }
                ],
                "description": "Creates Random Coding Sequences with specified GC content and Amino Acid usage.",
                "homepage": "https://github.com/amarallab/NullSeq"
            },
            {
                "name": "MultiQC",
                "uri": "https://bio.tools/multiqc",
                "topic": [
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "Sequencing"
                        },
                        {
                            "uri": "http://edamontology.org/topic_0091",
                            "term": "Bioinformatics"
                        }
                    ],
                    [
                        {
                            "uri": "http://edamontology.org/topic_3168",
                            "term": "DNA-Seq"
                        }
                    ]
                ],
                "function": [
                    {
                        "operation": [
                            [
                                {
                                    "uri": "http://edamontology.org/operation_2428",
                                    "term": "Validation"
                                }
                            ],
                            []
                        ],
                        "input": [],
                        "output": [
                            {
                                "uri": "http://edamontology.org/data_2048",
                                "term": "Report"
                            }
                        ]
                    }
                ],
                "description": "MultiQC aggregates results from multiple bioinformatics analyses across many samples into a single report. It searches a given directory for analysis logs and compiles a HTML report. It's a general use tool, perfect for summarising the output from numerous bioinformatics tools.",
                "homepage": "http://multiqc.info/"
            }
        ],
        "inputs": [
            "fastqc_files",
            "fastp_files",
            "seqyclean_files",
            "kraken2_files",
            "pangolin_files",
            "ivar_trim_files",
            "samtools_stats_files",
            "samtools_flagstat_files"
        ],
        "nb_inputs": 8,
        "outputs": [],
        "nb_outputs": 0,
        "name_workflow": "UPHL-BioNGS__Cecret",
        "directive": [
            "publishDir \"${params.outdir}\", mode: 'copy'",
            "tag \"multiqc\"",
            "cpus 1",
            "container 'ewels/multiqc:latest'"
        ],
        "when": "params.multiqc",
        "stub": ""
    }
}